
let PathData =  {
  nameEn: null,
  nameAr: null,
  callStatusFieldId: null,
  noteId: null,
  subNoteId: null,
  otherNoteId: null,
  callBillNumberId: null,
  visitCenterTime: null,
  visitCenter: null,
  nhcProject: null,
  nhcSuburb: null,
  pathGroups: [
    {
      id: null,
      name: null,
      viewOrder: 0,
      title: null,
      type: null,
      groupFields: [
        {
          id: null,
          fieldTypeId: null,
          name: null,
          viewOrder: 0,
          isReadOnly: false,
          isRequired: false,
          isReportExportable: false,
          isForVisitReport: false,
          isForSpecialSammaryReport: false,
          title: null,
          type: null,
          unified: 0,
          isOptionRelatedToEntity: false,
          optionsRelatedToEntityId: null,
          fieldOption: [
            {
              id: null,
              name: null,
              isActive: 0,
              relatedCategoryPathFieldId: null,
              relatedEntityOptionId: null,
              relatedEntityId: null,
              viewOrder: 0,
              showIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              selectedIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              disabledIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ]
            }
          ],
          showIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          readOnlyIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          disabledIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          eventsGroup: [
            {
              id: null,
              events: [
                {
                  id: null,
                  actionTypeId: null,
                  dynamicFunctionId: null,
                  dynamicFunctionIdentifire: null,
                  parameters: [
                    {
                      id: null,
                      name: null,
                      parameterIdentifire: null,
                      parameterId: null,
                      categoryPathFieldId: null,
                      staticValue: null,
                      isRelatedToPathFields: false,
                      fieldShouldRelatedToEntityTypeId: null
                    }
                  ],
                  results: [
                    {
                      id: null,
                      name: null,
                      outputIdentifire: null,
                      resultId: null,
                      categoryPathFieldId: null,
                      isNotification: false,
                      isPathResult: false,
                      isPathValue: false
                    }
                  ],
                  processOrder: 0
                }
              ],
              executeTrigger: {
                additionalProp1: false,
                additionalProp2: false,
                additionalProp3: false
              },
              executeIfCondetionGroup: [
                {
                  id: null,
                  relatedToCategoryPathFieldId: null,
                  categoryPathFieldEventGroupId: null,
                  conditionForId: null,
                  andorOr: false,
                  viewOrder: 0,
                  conditions: [
                    {
                      id: null,
                      fieldConditionGroupId: null,
                      fieldId: null,
                      conditionForId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      conditionRelationTypeId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              andorOr: false,
              processOrder: 0
            }
          ]
        }
      ]
    }
  ],
  eventGroups: [
    {
      id: null,
      events: [
        {
          id: null,
          actionTypeId: null,
          dynamicFunctionId: null,
          parameters: [
            {
              id: null,
              name: null,
              parameterIdentifire: null,
              parameterId: null,
              categoryPathFieldId: null,
              staticValue: null,
              isRelatedToPathFields: false,
              fieldShouldRelatedToEntityTypeId: null
            }
          ],
          results: [
            {
              id: null,
              name: null,
              outputIdentifire: null,
              resultId: null,
              categoryPathFieldId: null,
              isNotification: false,
              isPathResult: false,
              isPathValue: false
            }
          ],
          processOrder: 0
        }
      ],
      executeTrigger: {
        additionalProp1: false,
        additionalProp2: false,
        additionalProp3: false
      },
      executeIfCondetionGroup: [
        {
          id: null,
          relatedToCategoryPathFieldId: null,
          categoryPathFieldEventGroupId: null,
          conditionForId: null,
          andorOr: false,
          viewOrder: 0,
          conditions: [
            {
              id: null,
              fieldConditionGroupId: null,
              fieldId: null,
              conditionForId: null,
              conditionTypeId: null,
              value: null,
              andorOr: false,
              viewOrder: 0,
              valueList: [null],
              conditionRelationTypeId: null,
              categoryPathFieldRelatedEntityFieldId: null
            }
          ]
        }
      ],
      processOrder: 0,
      andorOr: false
    }
  ]
};








// import { Api_URL } from '../../Resources/ApiUrl';
// import LookUpsFrontdata from '../../Resources/LookUps'
// import  { useState ,useEffect } from "react";
// import styles from "./PathEditInfo.module.css";

// function PathEditInfo() {
//   const [groups, setGroups] = useState([{ id: 1, name: "Group 1", fields: [] }]);
//   const [openDropdownField, setOpenDropdownField] = useState(null);
//   const [activeField, setActiveField] = useState(null);
//   const [activeGroup, setActiveGroup] = useState(null);
//   const [activeTab, setActiveTab] = useState("main");
//   const inputFilterList = LookUpsFrontdata.FieldHelper;
//   const [fieldSelectList, setfieldSelectList] = useState(null);
//   const [chooseSelectField, setchooseSelectField] = useState(false);
// const [useCustomLookup, setUseCustomLookup] = useState(false);
// const [customOptions, setCustomOptions] = useState([]);
// const [newOption, setNewOption] = useState("");
//   // Ù‡Ø°Ø§ Ø§Ù„-state ÙŠØ­ØªÙˆÙ‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù‚Ù„ (Ù†Ø³ØªØ®Ø¯Ù… Ø¹Ù†ØµØ± ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ ÙÙŠÙ„Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨)
//   const [groupFields, setgroupFields] = useState([
//     {
//       id: null,
//       name: "",
//       viewOrder: 0,
//       title: "",
//       type: "",
//       groupFields: 
//     [ {
//     id: null,
//     fieldTypeId: null,
//     name: "",
//     viewOrder: 0,
//     isReadOnly: false,
//     isRequired: false,
//     isReportExportable: false,
//     isForVisitReport: false,
//     isForSpecialSammaryReport: false,
//     title: "",
//     type: "",
//     unified: 0,
//     isOptionRelatedToEntity: false,
//     optionsRelatedToEntityId: null,
//     fieldOption: [          {
//               id: null,
//               name: "",
//               isActive: 0,
//               relatedCategoryPathFieldId: null,
//               relatedEntityOptionId: null,
//               relatedEntityId: null,
//               viewOrder: 0,
//               showIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               selectedIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               disabledIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ]
//             }],
//     showIfCondetionGroup: [],
//     readOnlyIfCondetionGroup: [],
//     disabledIfCondetionGroup: []
//   }] ,           showIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: true,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: "",
//                   andorOr: true,
//                   viewOrder: 0,
//                   valueList: [],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           readOnlyIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: true,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: "",
//                   andorOr: true,
//                   viewOrder: 0,
//                   valueList: [],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           disabledIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: true,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: "",
//                   andorOr: true,
//                   viewOrder: 0,
//                   valueList: [],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//                  eventsGroup: [
//             {
//               id: null,
//               events: [
//                 {
//                   id: null,
//                   actionTypeId: null,
//                   dynamicFunctionId: null,
//                   dynamicFunctionIdentifire: "",
//                   parameters: [
//                     {
//                       id: null,
//                       name: "",
//                       parameterIdentifire: "",
//                       parameterId: null,
//                       categoryPathFieldId: null,
//                       staticValue: "",
//                       isRelatedToPathFields: false,
//                       fieldShouldRelatedToEntityTypeId: null
//                     }
//                   ],
//                   results: [
//                     {
//                       id: null,
//                       name: "",
//                       outputIdentifire: "",
//                       resultId: null,
//                       categoryPathFieldId: null,
//                       isNotification: false,
//                       isPathResult: false,
//                       isPathValue: false
//                     }
//                   ],
//                   processOrder: 0
//                 }
//               ],
//               executeTrigger: {},
//               executeIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedToCategoryPathFieldId: null,
//                   categoryPathFieldEventGroupId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   viewOrder: 0,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldConditionGroupId: null,
//                       fieldId: null,
//                       conditionForId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       conditionRelationTypeId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               andorOr: true,
//               processOrder: 0
//             }
//           ]}]);

//   // --- Ø¬Ø¯ÙŠØ¯: Ø­Ø§Ù„Ø§Øª Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ---
//   const [useSystemLookup, setUseSystemLookup] = useState(false); // ØªÙ… ØªÙØ¹ÙŠÙ„ Ø®ÙŠØ§Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
//   const [selectedSystemLookupKey, setSelectedSystemLookupKey] = useState(""); // Ø§Ù„-key Ø§Ù„Ù…Ø®ØªØ§Ø± Ù…Ù† ApplicationLookUp
//   const [systemLookupItems, setSystemLookupItems] = useState([]); // Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„-API
//   const [systemLookupLoading, setSystemLookupLoading] = useState(false);
// const [conditionsList, setConditionsList] = useState([]); // ÙƒÙ„ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø¶Ø§ÙØ©
// const [conditionTypes, setConditionTypes] = useState([]); // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ· Ù…Ù† API
//   // ÙˆØ¸ÙŠÙØ© Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø³ÙŠØ·Ø© Ù„ØªÙØ§Ø¯ÙŠ Ø£Ø®Ø·Ø§Ø¡ auto-resize Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙÙ‚ÙˆØ¯Ø©

//   const [disableConditionsList, setDisableConditionsList] = useState([]);

//   const autoResize = (e) => {
//     if (!e || !e.target) return;
//     try {
//       e.target.style.height = "auto";
//       e.target.style.height = `${e.target.scrollHeight}px`;
//     } catch (err) { /* noop */ }
//   };

//   useEffect(() => {
//     if (!activeField) return;

//     const updatedGroup = groups.find((g) =>
//       g.fields.some((f) => f.id === activeField.id)
//     );
//     if (!updatedGroup) return;

//     const updatedField = updatedGroup.fields.find(
//       (f) => f.id === activeField.id
//     );

//     if (updatedField && updatedField.label !== activeField.label) {
//       setActiveField(updatedField);
//     }
//   }, [groups]);

//   // --- ØªØ£ÙƒØ¯ Ø£Ù† Ù„Ø¯ÙŠÙ†Ø§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (groupFields) Ù…Ø¯ÙÙˆØ¹Ø© Ø¨Ø§Ù„ÙÙŠÙ„Ø¯ Ø§Ù„Ù†Ø´Ø· Ø­ØªÙ‰ Ù†Ø³ØªØ·ÙŠØ¹ ØªØ¹Ø¯ÙŠÙ„ Ù†ÙˆØ¹Ù‡ Ø¨Ø³Ù‡ÙˆÙ„Ø© ---
//   useEffect(() => {
//     if (!activeField) return;
//     setgroupFields((prev) => {
//       const exists = prev.some((p) => p.id === activeField.id);
//       if (exists) return prev;
//       // clone Ù…Ù† Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ„ Ù„ÙƒÙ† Ù†Ø¹Ø·ÙŠÙ‡ id ÙˆØ§Ø³Ù… Ù…Ø±ØªØ¨Ø·ÙŠÙ† Ø¨Ø§Ù„ÙÙŠÙ„Ø¯ Ø§Ù„Ù†Ø´Ø·
//       const template = prev[0] || {
//         id: activeField.id,
//         fieldTypeId: null,
//         name: activeField.label || "",
//         title: activeField.label || "",
//       };
//       return [...prev, { ...template, id: activeField.id, name: activeField.label || '', title: activeField.label || '' }];
//     });
//   }, [activeField]);

//   useEffect(() => {
//   const fetchConditionTypes = async () => {
//     try {
//       const entity = LookUpsFrontdata.ApplicationLookUp.find(
//         (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ·"
//       );
//       if (!entity) return;

//       const dto = { entityId: entity.key, condetion: null };
//       const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//         method: "POST",
//         headers: { "Content-Type": "application/json" },
//         body: JSON.stringify(dto),
//       });
//       const data = await res.json();

//       if (data?.succeeded && data?.data?.items) {
//         setConditionTypes(data.data.items.map(c => ({ value: c.value, text: c.text })));
//       }
//     } catch (err) {
//       console.error(err);
//     }
//   };

//   fetchConditionTypes();
// }, []);


//   let HandleFieldTypeSelect = (e) => {
//     const selectedValue = e.target.value;   // value Ù…Ù† Ø§Ù„Ù€ option
//     const selectedText = e.target.options[e.target.selectedIndex].text; // Ø§Ù„Ù†Øµ Ø§Ù„Ø¸Ø§Ù‡Ø±

//     if (selectedText === "One Select" || selectedText === "MultibelSelect" || selectedText === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Select)" || selectedText === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)") {
//       setchooseSelectField(true);
//     } else {
//       setchooseSelectField(false);
//     }

//     setgroupFields((prev) =>
//       prev.map((field) =>
//         field.id === activeField?.id
//           ? { ...field, fieldTypeId: selectedValue, type: selectedText }
//           : field
//       )
//     );

//   }

//   useEffect(() => {
//     const fetchFieldTypes = async () => {
//       try {
//         const entity = LookUpsFrontdata.ApplicationLookUp.find(
//           (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"
//         );

//         if (!entity) return;

//         const dto = {
//           entityId: entity.key,
//           condetion: null,
//         };

//         const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//           method: "POST",
//           headers: { "Content-Type": "application/json" },
//           body: JSON.stringify(dto),
//         });

//         const data = await res.json();

//         if (data?.succeeded && data?.data?.items) {
//           const mapped = data.data.items.map((c) => ({
//             value: c.value,
//             text: c.text,
//           }));
//           setfieldSelectList(mapped);
//         }
//       } catch (err) {
//         console.error(err);
//         if (typeof toast !== 'undefined') {
//           toast.error("Ø®Ø·Ø£ ÙØ§Ù„ØªØ­Ù…ÙŠÙ„", {
//             position: "top-right",
//             style: { backgroundColor: "red", color: "white" },
//           });
//         }
//       }
//     };

//     fetchFieldTypes();
//   }, []);

//   // --- Ø¬Ø¯ÙŠØ¯: Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ®ØªØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙŠØ§Ù† Ù…Ù† ApplicationLookUp Ù†Ø¬ÙŠØ¨ Ù…Ù†Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup ---
//   useEffect(() => {
//     if (!selectedSystemLookupKey) {
//       setSystemLookupItems([]);
//       return;
//     }

//     const fetchSystemLookupItems = async () => {
//       setSystemLookupLoading(true);
//       try {
//         const dto = { entityId: selectedSystemLookupKey, condetion: null };
//         const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//           method: 'POST',
//           headers: { 'Content-Type': 'application/json' },
//           body: JSON.stringify(dto),
//         });
//         const data = await res.json();
//         if (data?.succeeded && data?.data?.items) {
//           // Ù†Ø­ÙØ¸ Ø§Ù„Ù€ items Ø¹Ø´Ø§Ù† Ù†Ø¹Ø±Ø¶Ù‡Ù… ÙÙŠ Ø§Ù„-list (Ù†Ø£Ø®Ø° text Ùˆ value Ù…Ù† ÙƒÙ„ item)
//           setSystemLookupItems(data.data.items.map(it => ({ text: it.text ?? it.value, value: it.value })));
//         } else {
//           setSystemLookupItems([]);
//         }
//       } catch (err) {
//         console.error(err);
//         setSystemLookupItems([]);
//         if (typeof toast !== 'undefined') {
//           toast.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup");
//         }
//       } finally {
//         setSystemLookupLoading(false);
//       }
//     };

//     fetchSystemLookupItems();
//   }, [selectedSystemLookupKey]);



//   const addCondition = () => {
//   setConditionsList(prev => [
//     ...prev,
//     { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
//   ]);
// };

// const addDisableCondition = () => {
//   setDisableConditionsList(prev => [
//     ...prev,
//     { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
//   ]);
// };
//   // Ø¥Ø¶Ø§ÙØ© Ø¬Ø±ÙˆØ¨
//   const addGroup = () => {
//     setGroups((prev) => [
//       ...prev,
//       { id: Date.now(), name: `Group ${prev.length + 1}`, fields: [] },
//     ]);
//   };

//   // ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø¬Ø±ÙˆØ¨
//   const handleGroupNameChange = (groupId, newName) => {
//     setGroups((prev) =>
//       prev.map((g) => (g.id === groupId ? { ...g, name: newName } : g))
//     );
//   };

//   // Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ø¯
//   const addField = () => {
//     setGroups((prev) => {
//       if (prev.length === 0) {
//         const newGroup = { id: Date.now(), name: "Group 1", fields: [] };
//         newGroup.fields.push({ id: Date.now() + 1, label: "Field 1" });
//         return [newGroup];
//       }
//       return prev.map((g, idx) =>
//         idx === 0
//           ? { ...g, fields: [...g.fields, { id: Date.now(), label: `Field ${g.fields.length + 1}` }] }
//           : g
//       );
//     });
//   };

//   const handleFieldLabelChange = (groupId, fieldId, newLabel) => {
//     setGroups((prev) =>
//       prev.map((g) =>
//         g.id === groupId
//           ? {
//               ...g,
//               fields: g.fields.map((f) =>
//                 f.id === fieldId ? { ...f, label: newLabel } : f
//               ),
//             }
//           : g
//       )
//     );

//     setActiveField((af) => {
//       if (!af) {
//         return { id: fieldId, label: newLabel };
//       }
//       if (af.id === fieldId) {
//         return { ...af, label: newLabel };
//       }
//       return af;
//     });
//   };

//   // Drag Start
//   const handleDragStart = (e, fieldId, fromGroupId) => {
//     const payload = JSON.stringify({ fieldId, fromGroupId });
//     e.dataTransfer.setData("text/plain", payload);
//     e.dataTransfer.effectAllowed = "move";
//   };

//   // Drop
//   const handleDrop = (e, targetGroupId) => {
//     e.preventDefault();
//     const raw = e.dataTransfer.getData("text/plain");
//     if (!raw) return;
//     let obj;
//     try {
//       obj = JSON.parse(raw);
//     } catch {
//       return;
//     }
//     const { fieldId, fromGroupId } = obj;
//     if (fromGroupId === targetGroupId) return;

//     setGroups((prev) => {
//       let fieldObj = null;
//       const removed = prev.map((g) => {
//         if (g.id === fromGroupId) {
//           const filtered = g.fields.filter((f) => {
//             if (f.id === fieldId) {
//               fieldObj = f;
//               return false;
//             }
//             return true;
//           });
//           return { ...g, fields: filtered };
//         }
//         return g;
//       });
//       if (!fieldObj) return prev;
//       return removed.map((g) =>
//         g.id === targetGroupId ? { ...g, fields: [...g.fields, fieldObj] } : g
//       );
//     });
//   };

//   // Ø­Ø°Ù Ø¬Ø±ÙˆØ¨
//   const deleteGroup = (groupId) => {
//     setGroups((prev) => prev.filter((g) => g.id !== groupId));
//   };

//   // Ø­Ø°Ù ÙÙŠÙ„Ø¯
//   const deleteField = (groupId, fieldId) => {
//     setGroups((prev) =>
//       prev.map((g) =>
//         g.id === groupId ? { ...g, fields: g.fields.filter((f) => f.id !== fieldId) } : g
//       )
//     );
//     setActiveField((af) => (af && af.id === fieldId ? null : af));
//   };

//   // currentGroupField Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ select Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„
//   const currentGroupField = groupFields.find(f => f.id === activeField?.id) || groupFields[0];

//   return (
//     <div className={styles.container}>
//       {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ */}
//       <div className={styles.left}>
//         <div className={styles.groupsPanel}>
//           <div className={styles.actions}>
//             <button onClick={addGroup} className={styles.addButton}>+ New Group</button>
//             <button onClick={addField} className={styles.addButton}>+ New Field</button>
//           </div>

//           <div className={styles.groupsList}>
//             {groups.map((group) => (
//               <div
//                 key={group.id}
//                 className={styles.groupBox}
//                 onDragOver={(e) => e.preventDefault()}
//                 onDrop={(e) => handleDrop(e, group.id)}
//               >
//                 <div className={styles.groupHeader}>
//                   <input
//                     type="text"
//                     value={group.name}
//                     onChange={(e) => {handleGroupNameChange(group.id, e.target.value); autoResize(e);} }
//                     className={styles.groupNameInput}
//                     onClick={() => setActiveGroup(group)}
//                   />
//                   <button className={styles.deleteBtn} onClick={() => deleteGroup(group.id)}><i className="bi bi-trash-fill fs-3"></i></button>
//                 </div>

//                 <ul className={styles.fieldsUl}>
//                   {group.fields.map((field) => (
//                     <li
//                       key={field.id}
//                       className={styles.fieldItem}
//                       draggable
//                       onDragStart={(e) => handleDragStart(e, field.id, group.id)}
//                        onClick={() => {
//     setOpenDropdownField(null);
//   setActiveField(field);
//   }}
//                     >
//                       <span className={styles.dragHandle} aria-hidden>â‰¡</span>
//                        <div className={styles.fieldWithDropdown}>
//                       <input
//                         type="text"
//                         value={field.label}
//                         onChange={(e) => {handleFieldLabelChange(group.id, field.id, e.target.value);  
//                           autoResize(e);
//                          setOpenDropdownField(field.id);
//                         } }
//                         className={styles.fieldInput}
//                         draggable={false}
//                       />
//                             {/* suggestions */}
//       {openDropdownField === field.id && field.label && (
//         <ul className={styles.suggestions}>
//           {inputFilterList
//             .filter((item) =>
//               item.value.toLowerCase().includes(field.label.toLowerCase())
//             )
//             .map((item) => (
//               <li
//                 key={item.key}
//                 onClick={() =>{handleFieldLabelChange(group.id, field.id, item.value); 
//                   setOpenDropdownField(null);} }
//                 className={styles.suggestionItem}
//               >
//                 {item.value}
//               </li>
//             ))}
//         </ul>
//       )}
//     </div>
//                       <button
//                         className={styles.deleteBtn}
//                         onClick={(e) => {
//                           e.stopPropagation();
//                           deleteField(group.id, field.id);
//                         }}
//                       >âŒ</button>
//                     </li>
//                   ))}
//                 </ul>
//               </div>
//             ))}
//           </div>
//         </div>
//       </div>

//       {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙŠÙ…ÙŠÙ† */}
//      {activeField ? (  <div className={styles.right}>
//         <> <div className={styles.navbar}>
//           <button className={activeTab === "main" ? styles.activeBtn : ""} onClick={() => setActiveTab("main")}>
//             Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
//             </button>
//           <button className={activeTab === "fieldOptions" ? styles.activeBtn : ""} onClick={() => setActiveTab("fieldOptions")}>
//             Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ù‚Ù„
//             </button>
//           <button className={activeTab === "conditions" ? styles.activeBtn : ""} onClick={() => setActiveTab("conditions")}>Ø´Ø±ÙˆØ· Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±</button>
//              <button
//       className={activeTab === "disableConditions" ? styles.activeBtn : ""}
//       onClick={() => setActiveTab("disableConditions")}
//     >
//       Ø´Ø±ÙˆØ· Ø§Ù„ØªØ¹Ø·ÙŠÙ„
//     </button>
//         </div>

//         <div className={styles.tabContent}>
//           {activeTab === "main" && (
//             <div>
//               <p>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</p>
//               <input
//                 type="text"
//                 className={styles.input}
//                 value={activeField ? activeField.label : ""}
//               />
//               <p className='mt-2'>Ø§Ù„Ù†ÙˆØ¹</p>
//             <select className={styles.input} value={currentGroupField?.fieldTypeId ?? ""} onChange={HandleFieldTypeSelect}>
//   <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„</option>
//   {fieldSelectList?.map((e) => (
//     <option value={e.value} key={e.value}>
//       {e.text}
//     </option>
//   ))}
// </select>

//                   <div className={`mt-3 ${styles.checkboxGroup}`}>
//       <label>
//         <input type="checkbox" />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…Ø³Ø§Ø±ØŸ
//       </label>
//       <br />
//       <label>
//         <input type="checkbox" />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·ØŸ
//       </label>
//       <br />
//            <label>
//         <input type="checkbox" />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØµØ¯ÙŠØ± ÙØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŸ
//       </label>
//     </div>

//             </div>
//           )}
//           {activeTab === "fieldOptions" && <div >{chooseSelectField?
//           <div className='container'>
//             <h4>ÙÙ‚Ø· Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ù…Ù† Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
// <div className='row'>
// <div className='col-6'> <label>
//         <input   type="radio"
//       name="lookupOption"  
//       checked={useSystemLookup}
//       onChange={() => {
//         setUseSystemLookup(true);
//         setSelectedSystemLookupKey('');
//         setSystemLookupItems([]);
//       }} />
//      Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… 
//       </label></div>
// <div className='col-6'> 
//   <label>
//         <input   type="radio"
//       name="lookupOption"   
//       checked={!useSystemLookup}
//       onChange={() => {
//         setUseSystemLookup(false);
//         setSelectedSystemLookupKey('');
//         setSystemLookupItems([]);
//       }} />
//     Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµÙ‡
//            </label>
// </div>
// <br />

// {/* Ù„Ùˆ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ø¹Ø±Ø¶ select Ù…Ù…Ù„ÙˆØ¡ Ù…Ù† LookUpsFrontdata.ApplicationLookUp */}
// {useSystemLookup && (
//   <div className='col-12 mt-2'>
//     <label>Ø§Ø®ØªØ± ÙƒÙŠØ§Ù† Ù…Ù† Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</label>
//     <select className='form-control mt-2' value={selectedSystemLookupKey} onChange={(e)=>setSelectedSystemLookupKey(e.target.value)}>
//       <option value="">-- Ø§Ø®ØªØ± --</option>
//       {LookUpsFrontdata.ApplicationLookUp.map(item => (
//         <option key={item.key} value={item.key}>{item.value}</option>
//       ))}
//     </select>

//     {/* Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„-lookup Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© */}
//     <div className='mt-2'>
//       {systemLookupLoading ? (
//         <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ...</div>
//       ) : (
//         <div className={styles.listScroll}>
//           {systemLookupItems.length === 0 ? (
//             <div className='text-muted'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>
//           ) : (
//             systemLookupItems.map((it, idx) => (
//               <div key={idx} className='list-group-item'>
//                 <strong>{it.text}</strong>
//                   <button
//               className='btn btn-sm  ms-3'
//               onClick={() => {
//                 setSystemLookupItems(prev => prev.filter((_, i) => i !== idx));
//               }}
//             >
//               ğŸ—‘
//             </button>
//               </div>
//             ))
//           )}
//         </div>
//       )}
//     </div>
//   </div>
// )}
//  {customOptions.length === 0 ? (
// <></>
//       ) : (<div className={`col-12 container ${styles.listScroll} mt-3`}>{
//         customOptions.map((it, idx) => (
//           <div key={idx} className={`list-item-group `}>
//             <strong>{it.text}</strong>
//             <button
//               className="btn btn-sm  ms-3"
//               onClick={() =>
//                 setCustomOptions((prev) => prev.filter((_, i) => i !== idx))
//               }
//             >
//               ğŸ—‘
//             </button>
//           </div>
//         ))}
//          </div>
//       )}
// <input type="text" placeholder=' Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯' className={styles.input}   value={newOption}
//   onChange={(e) => setNewOption(e.target.value)} />
// <button className='btn btn-primary mt-2'  onClick={() => {
//         if (newOption.trim()) {
//           setCustomOptions((prev) => [...prev, { text: newOption, value: newOption }]);
//           setNewOption("");
//         }
//       }}>Ø§Ø¶Ø§ÙÙ‡</button>
// </div>
//           </div>
          
          
          
//           :"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„"}</div>}
// {activeTab === "conditions" && (
//   <div>
//     <button className="btn btn-primary mb-2" onClick={addCondition}>
//       + Ø§Ø¶Ù Ø´Ø±Ø·
//     </button>

//     {conditionsList.map((cond, idx) => (
//       <div key={cond.id} className="card p-2 mb-2">
//         {/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙŠÙ„Ø¯ */}
//         <select
//           className="form-control mb-2"
//           value={cond.fieldId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
//           {groups.flatMap(g => g.fields).map(f => (
//             <option key={f.id} value={f.id}>{f.label}</option>
//           ))}
//         </select>

//         {/* Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø· */}
//         <select
//           className="form-control mb-2"
//           value={cond.conditionTypeId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
//           {conditionTypes.map(ct => (
//             <option key={ct.value} value={ct.value}>{ct.text}</option>
//           ))}
//         </select>

//         {/* Ù„Ùˆ Ø§Ù„Ø´Ø±Ø· Ù…Ù† Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù„ÙŠ Ù…Ø­ØªØ§Ø¬ Ù‚ÙŠÙ…Ø© */}
//         {/* {!(cond.conditionTypeId === "ÙØ§Ø±Øº" || cond.conditionTypeId === "ØºÙŠØ± ÙØ§Ø±Øº"||cond.conditionTypeId ==="Not Null"||
//           cond.conditionTypeId ==="Null" )&& (
//           <input
//             type="text"
//             className="form-control"
//             placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//             value={cond.value}
//             onChange={(e) => {
//               const val = e.target.value;
//               setConditionsList(prev =>
//                 prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//               );
//             }}
//           />
//         )} */}
//         {(() => {
//   const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
//   const conditionText = selectedConditionType?.text;

//   return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
//     <input
//       type="text"
//       className="form-control"
//       placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//       value={cond.value}
//       onChange={(e) => {
//         const val = e.target.value;
//         setConditionsList(prev =>
//           prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//         );
//       }}
//     />
//   );
// })()}
//       </div>
//     ))}
//   </div>
// )}

//             {activeTab === "disableConditions" && (
//   <div>
//     <button className="btn btn-primary mb-2" onClick={addDisableCondition}>
//       + Ø§Ø¶Ù Ø´Ø±Ø· ØªØ¹Ø·ÙŠÙ„
//     </button>

//     {disableConditionsList.map((cond, idx) => (
//       <div key={cond.id} className="card p-2 mb-2">
//         <select
//           className="form-control mb-2"
//           value={cond.fieldId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setDisableConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
//           {groups.flatMap(g => g.fields).map(f => (
//             <option key={f.id} value={f.id}>{f.label}</option>
//           ))}
//         </select>

//         <select
//           className="form-control mb-2"
//           value={cond.conditionTypeId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setDisableConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
//           {conditionTypes.map(ct => (
//             <option key={ct.value} value={ct.value}>{ct.text}</option>
//           ))}
//         </select>

//         {/* {!(cond.conditionTypeId === "ÙØ§Ø±Øº" || cond.conditionTypeId === "ØºÙŠØ± ÙØ§Ø±Øº"||cond.conditionTypeId ==="Not Null"||
//           cond.conditionTypeId ==="Null" ) && (
//           <input
//             type="text"
//             className="form-control"
//             placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//             value={cond.value}
//             onChange={(e) => {
//               const val = e.target.value;
//               setDisableConditionsList(prev =>
//                 prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//               );
//             }}
//           />
//         )} */}
//         {(() => {
//   const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
//   const conditionText = selectedConditionType?.text;

//   return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
//     <input
//       type="text"
//       className="form-control"
//       placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//       value={cond.value}
//       onChange={(e) => {
//         const val = e.target.value;
//         setDisableConditionsList(prev =>
//           prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//         );
//       }}
//     />
//   );
// })()}

//       </div>
//     ))}
//   </div>
// )}

//         </div></>

//       </div>):null} 
//     </div>
//   );
// }

// export default PathEditInfo;




















// import { v4 as uuidv4 } from "uuid";
// import { Api_URL } from '../../Resources/ApiUrl';
// import LookUpsFrontdata from '../../Resources/LookUps'
// import  { useState ,useEffect } from "react";
// import styles from "./PathEditInfo.module.css";

// function PathEditInfo() {
//   const [groups, setGroups] = useState([{ id: 1, name: "Group 1", fields: [] }]);
//   const [openDropdownField, setOpenDropdownField] = useState(null);
//   const [activeField, setActiveField] = useState(null);
//   const [activeGroup, setActiveGroup] = useState(null);
//   const [activeTab, setActiveTab] = useState("main");
//   const inputFilterList = LookUpsFrontdata.FieldHelper;
//   const [fieldSelectList, setfieldSelectList] = useState(null);
//   const [chooseSelectField, setchooseSelectField] = useState(false);
// const [useCustomLookup, setUseCustomLookup] = useState(false);
// const [customOptions, setCustomOptions] = useState([]);
// const [newOption, setNewOption] = useState("");
//   // Ù‡Ø°Ø§ Ø§Ù„-state ÙŠØ­ØªÙˆÙ‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù‚Ù„ (Ù†Ø³ØªØ®Ø¯Ù… Ø¹Ù†ØµØ± ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ ÙÙŠÙ„Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨)
//   const [pathGroups, setPathGroups] = useState([
//     {
//       id: null,
//       name: "",
//       viewOrder: 0,
//       title: "",
//       type: "",
//       groupFields: 
//     [ {
//     id: null,
//     fieldTypeId: null,
//     name: "",
//     viewOrder: 0,
//     isReadOnly: false,
//     isRequired: false,
//     isReportExportable: false,
//     isForVisitReport: false,
//     isForSpecialSammaryReport: false,
//     title: "",
//     type: "",
//     unified: 0,
//     isOptionRelatedToEntity: false,
//     optionsRelatedToEntityId: null,
//     fieldOption: [          {
//               id: null,
//               name: "",
//               isActive: 0,
//               relatedCategoryPathFieldId: null,
//               relatedEntityOptionId: null,
//               relatedEntityId: null,
//               viewOrder: 0,
//               showIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               selectedIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               disabledIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ]
//             }],
//     showIfCondetionGroup: [],
//     readOnlyIfCondetionGroup: [],
//     disabledIfCondetionGroup: []
//   }] ,  
//                  eventsGroup: [
//             {
//               id: null,
//               events: [
//                 {
//                   id: null,
//                   actionTypeId: null,
//                   dynamicFunctionId: null,
//                   dynamicFunctionIdentifire: "",
//                   parameters: [
//                     {
//                       id: null,
//                       name: "",
//                       parameterIdentifire: "",
//                       parameterId: null,
//                       categoryPathFieldId: null,
//                       staticValue: "",
//                       isRelatedToPathFields: false,
//                       fieldShouldRelatedToEntityTypeId: null
//                     }
//                   ],
//                   results: [
//                     {
//                       id: null,
//                       name: "",
//                       outputIdentifire: "",
//                       resultId: null,
//                       categoryPathFieldId: null,
//                       isNotification: false,
//                       isPathResult: false,
//                       isPathValue: false
//                     }
//                   ],
//                   processOrder: 0
//                 }
//               ],
//               executeTrigger: {},
//               executeIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedToCategoryPathFieldId: null,
//                   categoryPathFieldEventGroupId: null,
//                   conditionForId: null,
//                   andorOr: true,
//                   viewOrder: 0,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldConditionGroupId: null,
//                       fieldId: null,
//                       conditionForId: null,
//                       conditionTypeId: null,
//                       value: "",
//                       andorOr: true,
//                       viewOrder: 0,
//                       valueList: [],
//                       conditionRelationTypeId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               andorOr: true,
//               processOrder: 0
//             }
//           ]}]);

//   // --- Ø¬Ø¯ÙŠØ¯: Ø­Ø§Ù„Ø§Øª Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ---
//   const [useSystemLookup, setUseSystemLookup] = useState(false); // ØªÙ… ØªÙØ¹ÙŠÙ„ Ø®ÙŠØ§Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
//   const [selectedSystemLookupKey, setSelectedSystemLookupKey] = useState(""); // Ø§Ù„-key Ø§Ù„Ù…Ø®ØªØ§Ø± Ù…Ù† ApplicationLookUp
//   const [systemLookupItems, setSystemLookupItems] = useState([]); // Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„-API
//   const [systemLookupLoading, setSystemLookupLoading] = useState(false);
// const [conditionsList, setConditionsList] = useState([]); // ÙƒÙ„ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø¶Ø§ÙØ©
// const [conditionTypes, setConditionTypes] = useState([]); // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ· Ù…Ù† API
//   // ÙˆØ¸ÙŠÙØ© Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø³ÙŠØ·Ø© Ù„ØªÙØ§Ø¯ÙŠ Ø£Ø®Ø·Ø§Ø¡ auto-resize Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙÙ‚ÙˆØ¯Ø©

//   const [disableConditionsList, setDisableConditionsList] = useState([]);

//   const autoResize = (e) => {
//     if (!e || !e.target) return;
//     try {
//       e.target.style.height = "auto";
//       e.target.style.height = `${e.target.scrollHeight}px`;
//     } catch (err) { /* noop */ }
//   };

//   useEffect(() => {
//     if (!activeField) return;

//     const updatedGroup = groups.find((g) =>
//       g.fields.some((f) => f.id === activeField.id)
//     );
//     if (!updatedGroup) return;

//     const updatedField = updatedGroup.fields.find(
//       (f) => f.id === activeField.id
//     );

//     if (updatedField && updatedField.label !== activeField.label) {
//       setActiveField(updatedField);
//     }
//   }, [groups]);

//   // --- ØªØ£ÙƒØ¯ Ø£Ù† Ù„Ø¯ÙŠÙ†Ø§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (groupFields) Ù…Ø¯ÙÙˆØ¹Ø© Ø¨Ø§Ù„ÙÙŠÙ„Ø¯ Ø§Ù„Ù†Ø´Ø· Ø­ØªÙ‰ Ù†Ø³ØªØ·ÙŠØ¹ ØªØ¹Ø¯ÙŠÙ„ Ù†ÙˆØ¹Ù‡ Ø¨Ø³Ù‡ÙˆÙ„Ø© ---
//   useEffect(() => {
//     if (!activeField) return;
//     setgroupFields((prev) => {
//       const exists = prev.some((p) => p.id === activeField.id);
//       if (exists) return prev;
//       // clone Ù…Ù† Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ„ Ù„ÙƒÙ† Ù†Ø¹Ø·ÙŠÙ‡ id ÙˆØ§Ø³Ù… Ù…Ø±ØªØ¨Ø·ÙŠÙ† Ø¨Ø§Ù„ÙÙŠÙ„Ø¯ Ø§Ù„Ù†Ø´Ø·
//       const template = prev[0] || {
//         id: activeField.id,
//         fieldTypeId: null,
//         name: activeField.label || "",
//         title: activeField.label || "",
//       };
//       return [...prev, { ...template, id: activeField.id, name: activeField.label || '', title: activeField.label || '' }];
//     });
//   }, [activeField]);

//   useEffect(() => {
//   const fetchConditionTypes = async () => {
//     try {
//       const entity = LookUpsFrontdata.ApplicationLookUp.find(
//         (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ·"
//       );
//       if (!entity) return;

//       const dto = { entityId: entity.key, condetion: null };
//       const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//         method: "POST",
//         headers: { "Content-Type": "application/json" },
//         body: JSON.stringify(dto),
//       });
//       const data = await res.json();

//       if (data?.succeeded && data?.data?.items) {
//         setConditionTypes(data.data.items.map(c => ({ value: c.value, text: c.text })));
//       }
//     } catch (err) {
//       console.error(err);
//     }
//   };

//   fetchConditionTypes();
// }, []);


//   let HandleFieldTypeSelect = (e) => {
//     const selectedValue = e.target.value;   // value Ù…Ù† Ø§Ù„Ù€ option
//     const selectedText = e.target.options[e.target.selectedIndex].text; // Ø§Ù„Ù†Øµ Ø§Ù„Ø¸Ø§Ù‡Ø±

//     if (selectedText === "One Select" || selectedText === "MultibelSelect" || selectedText === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Select)" || selectedText === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)") {
//       setchooseSelectField(true);
//     } else {
//       setchooseSelectField(false);
//     }

//     setgroupFields((prev) =>
//       prev.map((field) =>
//         field.id === activeField?.id
//           ? { ...field, fieldTypeId: selectedValue, type: selectedText }
//           : field
//       )
//     );

//       setgroupFields(prev =>
//     prev.map(g => ({
//       ...g,
//       groupFields: g.groupFields.map(f =>
//         f.id === activeField?.id
//           ? { ...f, fieldTypeId: selectedValue, type: selectedText }
//           : f
//       )
//     }))
//   );

//   }

//   useEffect(() => {
//     const fetchFieldTypes = async () => {
//       try {
//         const entity = LookUpsFrontdata.ApplicationLookUp.find(
//           (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"
//         );

//         if (!entity) return;

//         const dto = {
//           entityId: entity.key,
//           condetion: null,
//         };

//         const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//           method: "POST",
//           headers: { "Content-Type": "application/json" },
//           body: JSON.stringify(dto),
//         });

//         const data = await res.json();

//         if (data?.succeeded && data?.data?.items) {
//           const mapped = data.data.items.map((c) => ({
//             value: c.value,
//             text: c.text,
//           }));
//           setfieldSelectList(mapped);
//         }
//       } catch (err) {
//         console.error(err);
//         if (typeof toast !== 'undefined') {
//           toast.error("Ø®Ø·Ø£ ÙØ§Ù„ØªØ­Ù…ÙŠÙ„", {
//             position: "top-right",
//             style: { backgroundColor: "red", color: "white" },
//           });
//         }
//       }
//     };

//     fetchFieldTypes();
//   }, []);

//   // --- Ø¬Ø¯ÙŠØ¯: Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ®ØªØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙŠØ§Ù† Ù…Ù† ApplicationLookUp Ù†Ø¬ÙŠØ¨ Ù…Ù†Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup ---
//   useEffect(() => {
//     if (!selectedSystemLookupKey) {
//       setSystemLookupItems([]);
//       return;
//     }

//     const fetchSystemLookupItems = async () => {
//       setSystemLookupLoading(true);
//       try {
//         const dto = { entityId: selectedSystemLookupKey, condetion: null };
//         const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//           method: 'POST',
//           headers: { 'Content-Type': 'application/json' },
//           body: JSON.stringify(dto),
//         });
//         const data = await res.json();
//         if (data?.succeeded && data?.data?.items) {
//           // Ù†Ø­ÙØ¸ Ø§Ù„Ù€ items Ø¹Ø´Ø§Ù† Ù†Ø¹Ø±Ø¶Ù‡Ù… ÙÙŠ Ø§Ù„-list (Ù†Ø£Ø®Ø° text Ùˆ value Ù…Ù† ÙƒÙ„ item)
//           setSystemLookupItems(data.data.items.map(it => ({ text: it.text ?? it.value, value: it.value })));
//         } else {
//           setSystemLookupItems([]);
//         }
//       } catch (err) {
//         console.error(err);
//         setSystemLookupItems([]);
//         if (typeof toast !== 'undefined') {
//           toast.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup");
//         }
//       } finally {
//         setSystemLookupLoading(false);
//       }
//     };

//     fetchSystemLookupItems();
//   }, [selectedSystemLookupKey]);



//   const addCondition = () => {
//   setConditionsList(prev => [
//     ...prev,
//     { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
//   ]);
// };

// const addDisableCondition = () => {
//   setDisableConditionsList(prev => [
//     ...prev,
//     { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
//   ]);
// };
//   // Ø¥Ø¶Ø§ÙØ© Ø¬Ø±ÙˆØ¨
//   const addGroup = () => {
// const newGroup = {
//     id: uuidv4(),
//     name: `Group ${groups.length + 1}`,
//     viewOrder: groups.length,
//     title: `Group ${groups.length + 1}`,
//     type: "group",
//     groupFields: []
//   };

//   setGroups(prev => [...prev, { id: newGroup.id, name: newGroup.name, fields: [] }]);

//   // for backend
//   setPathGroups(prev => [...prev, newGroup]);

//   };

//   // ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø¬Ø±ÙˆØ¨
//   const handleGroupNameChange = (groupId, newName) => {
//     setGroups((prev) =>
//       prev.map((g) => (g.id === groupId ? { ...g, name: newName } : g))
//     );
//       // for backend
//   setPathGroups(prev => [...prev, newGroup]);
//   };

//   // Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ø¯
//   const addField = () => {
//     const newField = {
//     id: uuidv4(),
//     fieldTypeId: null,
//     name: `Field ${Date.now()}`, 
//     title: `Field ${Date.now()}`,
//     type: "",
//     isReadOnly: false,
//     isRequired: false,
//     isReportExportable: false,
//     isForVisitReport: false,
//     isForSpecialSammaryReport: false,
//     viewOrder: 0,
//     fieldOption: []
//   };
//       setGroups(prev =>
//     prev.map(g =>
//       g.id === groupId ? { ...g, fields: [...g.fields, { id: newField.id, label: newField.name }] } : g
//     )
//   );

// // forbackend
//   setPathGroups(prev =>
//     prev.map(g =>
//       g.id === groupId
//         ? { ...g, groupFields: [...g.groupFields, newField] }
//         : g
//     )
//   );

//   };

//   const handleFieldLabelChange = (groupId, fieldId, newLabel) => {
//     setGroups((prev) =>
//       prev.map((g) =>
//         g.id === groupId
//           ? {
//               ...g,
//               fields: g.fields.map((f) =>
//                 f.id === fieldId ? { ...f, label: newLabel } : f
//               ),
//             }
//           : g
//       )
//     );

//     setActiveField((af) => {
//       if (!af) {
//         return { id: fieldId, label: newLabel };
//       }
//       if (af.id === fieldId) {
//         return { ...af, label: newLabel };
//       }
//       return af;
//     });

// //for back 
//  setPathGroups((prev) =>
//     prev.map((g) =>
//       g.id === groupId
//         ? {
//             ...g,
//             groupFields: g.groupFields.map((f) =>
//               f.id === fieldId ? { ...f, title: newLabel, name: newLabel } : f
//             ),
//           }
//         : g
//     )
//   );
//   };

//   // Drag Start
//   const handleDragStart = (e, fieldId, fromGroupId) => {
//     const payload = JSON.stringify({ fieldId, fromGroupId });
//     e.dataTransfer.setData("text/plain", payload);
//     e.dataTransfer.effectAllowed = "move";
//   };

//   // Drop
//   const handleDrop = (e, targetGroupId) => {
//     e.preventDefault();
//     const raw = e.dataTransfer.getData("text/plain");
//     if (!raw) return;
//     let obj;
//     try {
//       obj = JSON.parse(raw);
//     } catch {
//       return;
//     }
//     const { fieldId, fromGroupId } = obj;
//     if (fromGroupId === targetGroupId) return;

//     setGroups((prev) => {
//       let fieldObj = null;
//       const removed = prev.map((g) => {
//         if (g.id === fromGroupId) {
//           const filtered = g.fields.filter((f) => {
//             if (f.id === fieldId) {
//               fieldObj = f;
//               return false;
//             }
//             return true;
//           });
//           return { ...g, fields: filtered };
//         }
//         return g;
//       });
//       if (!fieldObj) return prev;
//       return removed.map((g) =>
//         g.id === targetGroupId ? { ...g, fields: [...g.fields, fieldObj] } : g
//       );
//     });
//     // for back

//      setPathGroups((prev) => {
//     let fieldObj = null;
//     const removed = prev.map((g) => {
//       if (g.id === fromGroupId) {
//         const filtered = g.groupFields.filter((f) => {
//           if (f.id === fieldId) {
//             fieldObj = f;
//             return false;
//           }
//           return true;
//         });
//         return { ...g, groupFields: filtered };
//       }
//       return g;
//     });
//     if (!fieldObj) return prev;
//     return removed.map((g) =>
//       g.id === targetGroupId
//         ? { ...g, groupFields: [...g.groupFields, fieldObj] }
//         : g
//     );
//   });
//   };

//   // Ø­Ø°Ù Ø¬Ø±ÙˆØ¨
//   const deleteGroup = (groupId) => {
//     setGroups((prev) => prev.filter((g) => g.id !== groupId));
//     // for back
//       setPathGroups((prev) => prev.filter((g) => g.id !== groupId));
//   };

//   // Ø­Ø°Ù ÙÙŠÙ„Ø¯
//   const deleteField = (groupId, fieldId) => {
//     setGroups((prev) =>
//       prev.map((g) =>
//         g.id === groupId ? { ...g, fields: g.fields.filter((f) => f.id !== fieldId) } : g
//       )
//     );
//     setActiveField((af) => (af && af.id === fieldId ? null : af));

//     // for back
//      setPathGroups((prev) =>
//     prev.map((g) =>
//       g.id === groupId
//         ? { ...g, groupFields: g.groupFields.filter((f) => f.id !== fieldId) }
//         : g
//     )
//   );

//   };

//   // currentGroupField Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ select Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„
//   const currentGroupField = groupFields.find(f => f.id === activeField?.id) || groupFields[0];

//   return (
//     <div className={styles.container}>
//       {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ */}
//       <div className={styles.left}>
//         <div className={styles.groupsPanel}>
//           <div className={styles.actions}>
//             <button onClick={addGroup} className={styles.addButton}>+ New Group</button>
//             <button onClick={addField} className={styles.addButton}>+ New Field</button>
//           </div>

//           <div className={styles.groupsList}>
//             {groups.map((group) => (
//               <div
//                 key={group.id}
//                 className={styles.groupBox}
//                 onDragOver={(e) => e.preventDefault()}
//                 onDrop={(e) => handleDrop(e, group.id)}
//               >
//                 <div className={styles.groupHeader}>
//                   <input
//                     type="text"
//                     value={group.name}
//                     onChange={(e) => {handleGroupNameChange(group.id, e.target.value); autoResize(e);} }
//                     className={styles.groupNameInput}
//                     onClick={() => setActiveGroup(group)}
//                   />
//                   <button className={styles.deleteBtn} onClick={() => deleteGroup(group.id)}><i className="bi bi-trash-fill fs-3"></i></button>
//                 </div>

//                 <ul className={styles.fieldsUl}>
//                   {group.fields.map((field) => (
//                     <li
//                       key={field.id}
//                       className={styles.fieldItem}
//                       draggable
//                       onDragStart={(e) => handleDragStart(e, field.id, group.id)}
//                        onClick={() => {
//     setOpenDropdownField(null);
//   setActiveField(field);
//   }}
//                     >
//                       <span className={styles.dragHandle} aria-hidden>â‰¡</span>
//                        <div className={styles.fieldWithDropdown}>
//                       <input
//                         type="text"
//                         value={field.label}
//                         onChange={(e) => {handleFieldLabelChange(group.id, field.id, e.target.value);  
//                           autoResize(e);
//                          setOpenDropdownField(field.id);
//                         } }
//                         className={styles.fieldInput}
//                         draggable={false}
//                       />
//                             {/* suggestions */}
//       {openDropdownField === field.id && field.label && (
//         <ul className={styles.suggestions}>
//           {inputFilterList
//             .filter((item) =>
//               item.value.toLowerCase().includes(field.label.toLowerCase())
//             )
//             .map((item) => (
//               <li
//                 key={item.key}
//                 onClick={() =>{handleFieldLabelChange(group.id, field.id, item.value); 
//                   setOpenDropdownField(null);} }
//                 className={styles.suggestionItem}
//               >
//                 {item.value}
//               </li>
//             ))}
//         </ul>
//       )}
//     </div>
//                       <button
//                         className={styles.deleteBtn}
//                         onClick={(e) => {
//                           e.stopPropagation();
//                           deleteField(group.id, field.id);
//                         }}
//                       >âŒ</button>
//                     </li>
//                   ))}
//                 </ul>
//               </div>
//             ))}
//           </div>
//         </div>
//       </div>

//       {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙŠÙ…ÙŠÙ† */}
//      {activeField ? (  <div className={styles.right}>
//         <> <div className={styles.navbar}>
//           <button className={activeTab === "main" ? styles.activeBtn : ""} onClick={() => setActiveTab("main")}>
//             Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
//             </button>
//           <button className={activeTab === "fieldOptions" ? styles.activeBtn : ""} onClick={() => setActiveTab("fieldOptions")}>
//             Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ù‚Ù„
//             </button>
//           <button className={activeTab === "conditions" ? styles.activeBtn : ""} onClick={() => setActiveTab("conditions")}>Ø´Ø±ÙˆØ· Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±</button>
//              <button
//       className={activeTab === "disableConditions" ? styles.activeBtn : ""}
//       onClick={() => setActiveTab("disableConditions")}
//     >
//       Ø´Ø±ÙˆØ· Ø§Ù„ØªØ¹Ø·ÙŠÙ„
//     </button>
//         </div>

//         <div className={styles.tabContent}>
//           {activeTab === "main" && (
//             <div>
//               <p>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</p>
//               <input
//                 type="text"
//                 className={styles.input}
//                 value={activeField ? activeField.label : ""}
//               />
//               <p className='mt-2'>Ø§Ù„Ù†ÙˆØ¹</p>
//             <select className={styles.input} value={currentGroupField?.fieldTypeId ?? ""} onChange={HandleFieldTypeSelect}>
//   <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„</option>
//   {fieldSelectList?.map((e) => (
//     <option value={e.value} key={e.value}>
//       {e.text}
//     </option>
//   ))}
// </select>

//                   <div className={`mt-3 ${styles.checkboxGroup}`}>
//       <label>
//         <input type="checkbox" />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…Ø³Ø§Ø±ØŸ
//       </label>
//       <br />
//       <label>
//         <input type="checkbox" />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·ØŸ
//       </label>
//       <br />
//            <label>
//         <input type="checkbox" />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØµØ¯ÙŠØ± ÙØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŸ
//       </label>
//     </div>

//             </div>
//           )}
//           {activeTab === "fieldOptions" && <div >{chooseSelectField?
//           <div className='container'>
//             <h4>ÙÙ‚Ø· Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ù…Ù† Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
// <div className='row'>
// <div className='col-6'> <label>
//         <input   type="radio"
//       name="lookupOption"  
//       checked={useSystemLookup}
//       onChange={() => {
//         setUseSystemLookup(true);
//         setSelectedSystemLookupKey('');
//         setSystemLookupItems([]);
//       }} />
//      Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… 
//       </label></div>
// <div className='col-6'> 
//   <label>
//         <input   type="radio"
//       name="lookupOption"   
//       checked={!useSystemLookup}
//       onChange={() => {
//         setUseSystemLookup(false);
//         setSelectedSystemLookupKey('');
//         setSystemLookupItems([]);
//       }} />
//     Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµÙ‡
//            </label>
// </div>
// <br />

// {/* Ù„Ùˆ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ø¹Ø±Ø¶ select Ù…Ù…Ù„ÙˆØ¡ Ù…Ù† LookUpsFrontdata.ApplicationLookUp */}
// {useSystemLookup && (
//   <div className='col-12 mt-2'>
//     <label>Ø§Ø®ØªØ± ÙƒÙŠØ§Ù† Ù…Ù† Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</label>
//     <select className='form-control mt-2' value={selectedSystemLookupKey} onChange={(e)=>setSelectedSystemLookupKey(e.target.value)}>
//       <option value="">-- Ø§Ø®ØªØ± --</option>
//       {LookUpsFrontdata.ApplicationLookUp.map(item => (
//         <option key={item.key} value={item.key}>{item.value}</option>
//       ))}
//     </select>

//     {/* Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„-lookup Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© */}
//     <div className='mt-2'>
//       {systemLookupLoading ? (
//         <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ...</div>
//       ) : (
//         <div className={styles.listScroll}>
//           {systemLookupItems.length === 0 ? (
//             <div className='text-muted'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>
//           ) : (
//             systemLookupItems.map((it, idx) => (
//               <div key={idx} className='list-group-item'>
//                 <strong>{it.text}</strong>
//                   <button
//               className='btn btn-sm  ms-3'
//               onClick={() => {
//                 setSystemLookupItems(prev => prev.filter((_, i) => i !== idx));
//               }}
//             >
//               ğŸ—‘
//             </button>
//               </div>
//             ))
//           )}
//         </div>
//       )}
//     </div>
//   </div>
// )}
//  {customOptions.length === 0 ? (
// <></>
//       ) : (<div className={`col-12 container ${styles.listScroll} mt-3`}>{
//         customOptions.map((it, idx) => (
//           <div key={idx} className={`list-item-group `}>
//             <strong>{it.text}</strong>
//             <button
//               className="btn btn-sm  ms-3"
//               onClick={() =>
//                 setCustomOptions((prev) => prev.filter((_, i) => i !== idx))
//               }
//             >
//               ğŸ—‘
//             </button>
//           </div>
//         ))}
//          </div>
//       )}
// <input type="text" placeholder=' Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯' className={styles.input}   value={newOption}
//   onChange={(e) => setNewOption(e.target.value)} />
// <button className='btn btn-primary mt-2'  onClick={() => {
//         if (newOption.trim()) {
//           setCustomOptions((prev) => [...prev, { text: newOption, value: newOption }]);
//           setNewOption("");
//         }
//       }}>Ø§Ø¶Ø§ÙÙ‡</button>
// </div>
//           </div>
          
          
          
//           :"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„"}</div>}
// {activeTab === "conditions" && (
//   <div>
//     <button className="btn btn-primary mb-2" onClick={addCondition}>
//       + Ø§Ø¶Ù Ø´Ø±Ø·
//     </button>

//     {conditionsList.map((cond, idx) => (
//       <div key={cond.id} className="card p-2 mb-2">
//         {/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙŠÙ„Ø¯ */}
//         <select
//           className="form-control mb-2"
//           value={cond.fieldId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
//           {groups.flatMap(g => g.fields).map(f => (
//             <option key={f.id} value={f.id}>{f.label}</option>
//           ))}
//         </select>

//         {/* Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø· */}
//         <select
//           className="form-control mb-2"
//           value={cond.conditionTypeId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
//           {conditionTypes.map(ct => (
//             <option key={ct.value} value={ct.value}>{ct.text}</option>
//           ))}
//         </select>

//         {/* Ù„Ùˆ Ø§Ù„Ø´Ø±Ø· Ù…Ù† Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù„ÙŠ Ù…Ø­ØªØ§Ø¬ Ù‚ÙŠÙ…Ø© */}
//         {/* {!(cond.conditionTypeId === "ÙØ§Ø±Øº" || cond.conditionTypeId === "ØºÙŠØ± ÙØ§Ø±Øº"||cond.conditionTypeId ==="Not Null"||
//           cond.conditionTypeId ==="Null" )&& (
//           <input
//             type="text"
//             className="form-control"
//             placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//             value={cond.value}
//             onChange={(e) => {
//               const val = e.target.value;
//               setConditionsList(prev =>
//                 prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//               );
//             }}
//           />
//         )} */}
//         {(() => {
//   const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
//   const conditionText = selectedConditionType?.text;

//   return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
//     <input
//       type="text"
//       className="form-control"
//       placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//       value={cond.value}
//       onChange={(e) => {
//         const val = e.target.value;
//         setConditionsList(prev =>
//           prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//         );
//       }}
//     />
//   );
// })()}
//       </div>
//     ))}
//   </div>
// )}

//             {activeTab === "disableConditions" && (
//   <div>
//     <button className="btn btn-primary mb-2" onClick={addDisableCondition}>
//       + Ø§Ø¶Ù Ø´Ø±Ø· ØªØ¹Ø·ÙŠÙ„
//     </button>

//     {disableConditionsList.map((cond, idx) => (
//       <div key={cond.id} className="card p-2 mb-2">
//         <select
//           className="form-control mb-2"
//           value={cond.fieldId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setDisableConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
//           {groups.flatMap(g => g.fields).map(f => (
//             <option key={f.id} value={f.id}>{f.label}</option>
//           ))}
//         </select>

//         <select
//           className="form-control mb-2"
//           value={cond.conditionTypeId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setDisableConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
//           {conditionTypes.map(ct => (
//             <option key={ct.value} value={ct.value}>{ct.text}</option>
//           ))}
//         </select>

//         {/* {!(cond.conditionTypeId === "ÙØ§Ø±Øº" || cond.conditionTypeId === "ØºÙŠØ± ÙØ§Ø±Øº"||cond.conditionTypeId ==="Not Null"||
//           cond.conditionTypeId ==="Null" ) && (
//           <input
//             type="text"
//             className="form-control"
//             placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//             value={cond.value}
//             onChange={(e) => {
//               const val = e.target.value;
//               setDisableConditionsList(prev =>
//                 prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//               );
//             }}
//           />
//         )} */}
//         {(() => {
//   const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
//   const conditionText = selectedConditionType?.text;

//   return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
//     <input
//       type="text"
//       className="form-control"
//       placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//       value={cond.value}
//       onChange={(e) => {
//         const val = e.target.value;
//         setDisableConditionsList(prev =>
//           prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//         );
//       }}
//     />
//   );
// })()}

//       </div>
//     ))}
//   </div>
// )}

//         </div></>

//       </div>):null} 
//     </div>
//   );
// }

// export default PathEditInfo;




///********************** */










































// import { v4 as uuidv4 } from "uuid";
// import { Api_URL } from '../../Resources/ApiUrl';
// import LookUpsFrontdata from '../../Resources/LookUps'
// import  { useState ,useEffect } from "react";
// import styles from "./PathEditInfo.module.css";

// function PathEditInfo() {
//   const [openDropdownField, setOpenDropdownField] = useState(null);
//   const [activeField, setActiveField] = useState(null);
//   const [ActiveGroup, setActiveGroup] = useState(null);
//   const [activeTab, setActiveTab] = useState("main");
//   const inputFilterList = LookUpsFrontdata.FieldHelper;
//   const [fieldSelectList, setfieldSelectList] = useState(null);
//   const [chooseSelectField, setchooseSelectField] = useState(false);
// const [useCustomLookup, setUseCustomLookup] = useState(false);
// const [customOptions, setCustomOptions] = useState([]);
// const [newOption, setNewOption] = useState("");

//   // --- Ø¬Ø¯ÙŠØ¯: Ø­Ø§Ù„Ø§Øª Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ---
//   const [useSystemLookup, setUseSystemLookup] = useState(false); // ØªÙ… ØªÙØ¹ÙŠÙ„ Ø®ÙŠØ§Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
//   const [selectedSystemLookupKey, setSelectedSystemLookupKey] = useState(""); // Ø§Ù„-key Ø§Ù„Ù…Ø®ØªØ§Ø± Ù…Ù† ApplicationLookUp
//   const [systemLookupItems, setSystemLookupItems] = useState([]); // Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„-API
//   const [systemLookupLoading, setSystemLookupLoading] = useState(false);
// const [conditionsList, setConditionsList] = useState([]); // ÙƒÙ„ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø¶Ø§ÙØ©
// const [conditionTypes, setConditionTypes] = useState([]); // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ· Ù…Ù† API

//   // ÙˆØ¸ÙŠÙØ© Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø³ÙŠØ·Ø© Ù„ØªÙØ§Ø¯ÙŠ Ø£Ø®Ø·Ø§Ø¡ auto-resize Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙÙ‚ÙˆØ¯Ø©

//   const [disableConditionsList, setDisableConditionsList] = useState([]);

//   const isSelectField = activeField?.type === "One Select" 
//   || activeField?.type === "MultibelSelect" 
//   || activeField?.type === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Select)" 
//   || activeField?.type === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)"
//   || activeField?.type === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)"
//   || activeField?.type === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (CheckBox)"
//   || activeField?.type === "CheckBox Group"
//   || activeField?.type === "Radio Button"
//   || activeField?.type === "View List"
//   || activeField?.type === "Ù‚Ø§Ø¦Ù…Ø© Ù†ØµÙŠØ©"
//   ;
//   // Ù‡Ø°Ø§ Ø§Ù„-state ÙŠØ­ØªÙˆÙ‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù‚Ù„ (Ù†Ø³ØªØ®Ø¯Ù… Ø¹Ù†ØµØ± ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ ÙÙŠÙ„Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨)
// const [pathGroups, setPathGroups] = useState([
//     {
//       id:  uuidv4(),
//       name: "Group",
//       viewOrder: 0,
//       title:"Group",
//       type: null,
//       groupFields: [
//         {
//           id: uuidv4(),
//           fieldTypeId: null,
//           name: "field 1",
//           viewOrder: 0,
//           isReadOnly: false,
//           isRequired: false,
//           isReportExportable: false,
//           isForVisitReport: false,
//           isForSpecialSammaryReport: false,
//           title: "field 1",
//           type: null,
//           unified: 0,
//           isOptionRelatedToEntity: false,
//           optionsRelatedToEntityId: null,
//           fieldOption: [
//             {
//               id: null,
//               name: null,
//               isActive: 0,
//               relatedCategoryPathFieldId: null,
//               relatedEntityOptionId: null,
//               relatedEntityId: null,
//               viewOrder: 0,
//               showIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               selectedIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               disabledIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ]
//             }
//           ],
//           showIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: false,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   valueList: [null],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           readOnlyIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: false,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   valueList: [null],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           disabledIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: false,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   valueList: [null],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           eventsGroup: [
//             {
//               id: null,
//               events: [
//                 {
//                   id: null,
//                   actionTypeId: null,
//                   dynamicFunctionId: null,
//                   dynamicFunctionIdentifire: null,
//                   parameters: [
//                     {
//                       id: null,
//                       name: null,
//                       parameterIdentifire: null,
//                       parameterId: null,
//                       categoryPathFieldId: null,
//                       staticValue: null,
//                       isRelatedToPathFields: false,
//                       fieldShouldRelatedToEntityTypeId: null
//                     }
//                   ],
//                   results: [
//                     {
//                       id: null,
//                       name: null,
//                       outputIdentifire: null,
//                       resultId: null,
//                       categoryPathFieldId: null,
//                       isNotification: false,
//                       isPathResult: false,
//                       isPathValue: false
//                     }
//                   ],
//                   processOrder: 0
//                 }
//               ],
//               executeTrigger: {
//                 additionalProp1: false,
//                 additionalProp2: false,
//                 additionalProp3: false
//               },
//               executeIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedToCategoryPathFieldId: null,
//                   categoryPathFieldEventGroupId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldConditionGroupId: null,
//                       fieldId: null,
//                       conditionForId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       conditionRelationTypeId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               andorOr: false,
//               processOrder: 0
//             }
//           ]
//         }
//       ]
//     }
//   ])


//   const autoResize = (e) => {
//     if (!e || !e.target) return;
//     try {
//       e.target.style.height = "auto";
//       e.target.style.height = `${e.target.scrollHeight}px`;
//     } catch (err) { /* noop */ }
//   };

//    useEffect(() => {
//     const fetchFieldTypes = async () => {
//       try {
//         const entity = LookUpsFrontdata.ApplicationLookUp.find(
//           (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"
//         );

//         if (!entity) return;

//         const dto = {
//           entityId: entity.key,
//           condetion: null,
//         };

//         const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//           method: "POST",
//           headers: { "Content-Type": "application/json" },
//           body: JSON.stringify(dto),
//         });

//         const data = await res.json();

//         if (data?.succeeded && data?.data?.items) {
//           const mapped = data.data.items.map((c) => ({
//             value: c.value,
//             text: c.text,
//           }));
//           setfieldSelectList(mapped);
//         }
//       } catch (err) {
//         console.error(err);
//         if (typeof toast !== 'undefined') {
//           toast.error("Ø®Ø·Ø£ ÙØ§Ù„ØªØ­Ù…ÙŠÙ„", {
//             position: "top-right",
//             style: { backgroundColor: "red", color: "white" },
//           });
//         }
//       }
//     };

//     fetchFieldTypes();
//   }, []);

//   // --- Ø¬Ø¯ÙŠØ¯: Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ®ØªØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙŠØ§Ù† Ù…Ù† ApplicationLookUp Ù†Ø¬ÙŠØ¨ Ù…Ù†Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup ---
//   useEffect(() => {
//     if (!selectedSystemLookupKey) {
//       setSystemLookupItems([]);
//       return;
//     }

//     const fetchSystemLookupItems = async () => {
//       setSystemLookupLoading(true);
//       try {
//         const dto = { entityId: selectedSystemLookupKey, condetion: null };
//         const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//           method: 'POST',
//           headers: { 'Content-Type': 'application/json' },
//           body: JSON.stringify(dto),
//         });
//         const data = await res.json();
//         if (data?.succeeded && data?.data?.items) {
//           // Ù†Ø­ÙØ¸ Ø§Ù„Ù€ items Ø¹Ø´Ø§Ù† Ù†Ø¹Ø±Ø¶Ù‡Ù… ÙÙŠ Ø§Ù„-list (Ù†Ø£Ø®Ø° text Ùˆ value Ù…Ù† ÙƒÙ„ item)
//           setSystemLookupItems(data.data.items.map(it => ({ text: it.text ?? it.value, value: it.value })));
//         } else {
//           setSystemLookupItems([]);
//         }
//       } catch (err) {
//         console.error(err);
//         setSystemLookupItems([]);
//         if (typeof toast !== 'undefined') {
//           toast.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup");
//         }
//       } finally {
//         setSystemLookupLoading(false);
//       }
//     };

//     fetchSystemLookupItems();
//   }, [selectedSystemLookupKey]);


//   useEffect(() => {
//     if (!activeField) return;

//     const updatedGroup = pathGroups.find((g) =>
//       g.groupFields.some((f) => f.id === activeField.id)
//     );
//     if (!updatedGroup) return;

//     const updatedField = updatedGroup.groupFields.find(
//       (f) => f.id === activeField.id
//     );

//     if (updatedField && updatedField.name !== activeField.name) {
//       setActiveField(updatedField);
//     }
//   }, [pathGroups]);



//   useEffect(() => {
//   const fetchConditionTypes = async () => {
//     try {
//       const entity = LookUpsFrontdata.ApplicationLookUp.find(
//         (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ·"
//       );
//       if (!entity) return;

//       const dto = { entityId: entity.key, condetion: null };
//       const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
//         method: "POST",
//         headers: { "Content-Type": "application/json" },
//         body: JSON.stringify(dto),
//       });
//       const data = await res.json();

//       if (data?.succeeded && data?.data?.items) {
//         setConditionTypes(data.data.items.map(c => ({ value: c.value, text: c.text })));
//       }
//     } catch (err) {
//       console.error(err);
//     }
//   };

//   fetchConditionTypes();
// }, []);


// useEffect(() => {
//   if (activeField && selectedSystemLookupKey && systemLookupItems.length > 0) {
//     handleSelectSystemLookup(activeField.id, selectedSystemLookupKey, systemLookupItems);
//   }
//   else if(activeField && !selectedSystemLookupKey){
//         setPathGroups(prev =>
//         prev.map(group => ({
//           ...group,
//           groupFields: group.groupFields.map(field =>
//             field.id === activeField.id
//               ? {
//                   ...field,
//                   isOptionRelatedToEntity: false,
//                   isActive:0,
//                   optionsRelatedToEntityId: null,
//                   fieldOption: [], 
//                 }
//               : field
//           ),
//         }))
//       );
//   }
// }, [systemLookupItems, activeField, selectedSystemLookupKey]);

// let generateEmptyField = (count) => 
//   {
//     return {
//           id:  uuidv4(),
//           fieldTypeId: null,
//           name: "field 1",
//           viewOrder: count  || 0,
//           isReadOnly: false,
//           isRequired: false,
//           isReportExportable: false,
//           isForVisitReport: false,
//           isForSpecialSammaryReport: false,
//           title: null,
//           type: null,
//           unified: 0,
//           isOptionRelatedToEntity: false,
//           optionsRelatedToEntityId: null,
//           fieldOption: [
//             {
//               id: null,
//               name: null,
//               isActive: 0,
//               relatedCategoryPathFieldId: null,
//               relatedEntityOptionId: null,
//               relatedEntityId: null,
//               viewOrder: 0,
//               showIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               selectedIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               disabledIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedCategoryPathFieldOptionId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       relatedCategoryPathFieldId: null,
//                       relatedEntityId: null,
//                       relatedEntityOptionId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ]
//             }
//           ],
//           showIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: false,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   valueList: [null],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           readOnlyIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: false,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   valueList: [null],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           disabledIfCondetionGroup: [
//             {
//               id: null,
//               relatedToCategoryPathFieldId: null,
//               categoryPathFieldEventGroupId: null,
//               conditionForId: null,
//               andorOr: false,
//               viewOrder: 0,
//               conditions: [
//                 {
//                   id: null,
//                   fieldConditionGroupId: null,
//                   fieldId: null,
//                   conditionForId: null,
//                   conditionTypeId: null,
//                   value: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   valueList: [null],
//                   conditionRelationTypeId: null,
//                   categoryPathFieldRelatedEntityFieldId: null
//                 }
//               ]
//             }
//           ],
//           eventsGroup: [
//             {
//               id: null,
//               events: [
//                 {
//                   id: null,
//                   actionTypeId: null,
//                   dynamicFunctionId: null,
//                   dynamicFunctionIdentifire: null,
//                   parameters: [
//                     {
//                       id: null,
//                       name: null,
//                       parameterIdentifire: null,
//                       parameterId: null,
//                       categoryPathFieldId: null,
//                       staticValue: null,
//                       isRelatedToPathFields: false,
//                       fieldShouldRelatedToEntityTypeId: null
//                     }
//                   ],
//                   results: [
//                     {
//                       id: null,
//                       name: null,
//                       outputIdentifire: null,
//                       resultId: null,
//                       categoryPathFieldId: null,
//                       isNotification: false,
//                       isPathResult: false,
//                       isPathValue: false
//                     }
//                   ],
//                   processOrder: 0
//                 }
//               ],
//               executeTrigger: {
//                 additionalProp1: false,
//                 additionalProp2: false,
//                 additionalProp3: false
//               },
//               executeIfCondetionGroup: [
//                 {
//                   id: null,
//                   relatedToCategoryPathFieldId: null,
//                   categoryPathFieldEventGroupId: null,
//                   conditionForId: null,
//                   andorOr: false,
//                   viewOrder: 0,
//                   conditions: [
//                     {
//                       id: null,
//                       fieldConditionGroupId: null,
//                       fieldId: null,
//                       conditionForId: null,
//                       conditionTypeId: null,
//                       value: null,
//                       andorOr: false,
//                       viewOrder: 0,
//                       valueList: [null],
//                       conditionRelationTypeId: null,
//                       categoryPathFieldRelatedEntityFieldId: null
//                     }
//                   ]
//                 }
//               ],
//               andorOr: false,
//               processOrder: 0
//             }
//           ]
//         }
      
//   }




//   let HandleFieldTypeSelect = (e) => {
//     const selectedValue = e.target.value;   // value Ù…Ù† Ø§Ù„Ù€ option
//     const selectedText = e.target.options[e.target.selectedIndex].text; // Ø§Ù„Ù†Øµ Ø§Ù„Ø¸Ø§Ù‡Ø±

//     if (selectedText === "One Select" || selectedText === "MultibelSelect" || selectedText === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Select)" || selectedText === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)") {
//       setchooseSelectField(true);
//     } else {
//        setchooseSelectField(false);
//     }

//     // Ù†Ø­Ø¯Ø« Ø§Ù„-pathGroups Ø¨Ù†ÙØ³ Ø§Ù„ØªØºÙŠÙŠØ±
//     setPathGroups((prev) =>
//       prev.map((group) => ({
//         ...group,
//         groupFields: group.groupFields.map((field) =>
//           field.id === activeField?.id
//             ? { ...field, fieldTypeId: selectedValue, type: selectedText }
//             : field
//         ),
//       }))
//     );

// setActiveField((prev) => ({
//   ...prev,
//   fieldTypeId: selectedValue,
//   type: selectedText,
// }));

//   }

// const handleSelectSystemLookup = (fieldId, lookupKey, lookupItems, customOptions = []) => {
//   setPathGroups(prev =>
//     prev.map(group => ({
//       ...group,
//       groupFields: group.groupFields.map(field =>
//         field.id === fieldId
//           ? {
//               ...field,
//               isOptionRelatedToEntity: true,
//               optionsRelatedToEntityId: lookupKey,
//               fieldOption: [
//                 // system lookup items
//                 ...lookupItems.map((item, index) => ({
//                   id: uuidv4(),
//                   name: item.text,
//                   isActive: 1,
//                   relatedCategoryPathFieldId: null,
//                   relatedEntityOptionId: item.value, // Ù„Ø§Ø­Ø¸ Ù‡Ù†Ø§ value Ù…Ù† API
//                   relatedEntityId: null,
//                   viewOrder: index,
//                   showIfCondetionGroup: [],
//                   selectedIfCondetionGroup: [],
//                   disabledIfCondetionGroup: [],
//                 })),
//                 // custom options (merge)
//                 ...customOptions.map((c, i) => ({
//                   id: uuidv4(),
//                   name: c.text,
//                   isActive: 1,
//                   relatedCategoryPathFieldId: null,
//                   relatedEntityOptionId: null,
//                   relatedEntityId: null,
//                   viewOrder: lookupItems.length + i,
//                   showIfCondetionGroup: [],
//                   selectedIfCondetionGroup: [],
//                   disabledIfCondetionGroup: [],
//                 })),
//               ],
//             }
//           : field
//       ),
//     }))
//   );
// };



// const handleAddCustomOption = (fieldId, newOption, useSystemLookup, systemItems) => {
//   setPathGroups(prev =>
//     prev.map(group => ({
//       ...group,
//       groupFields: group.groupFields.map(field =>
//         field.id === fieldId
//           ? {
//               ...field,
//               fieldOption: [
//                 ...(useSystemLookup
//                   ? field.fieldOption.filter(o => o.relatedEntityOptionId)
//                   : []),
//                 {
//                   id: uuidv4(),
//                   name: newOption,
//                   isActive: 1,
//                   relatedCategoryPathFieldId: null,
//                   relatedEntityOptionId: null,
//                   relatedEntityId: null,
//                   viewOrder: field.fieldOption.length,
//                   showIfCondetionGroup: null,
//                   selectedIfCondetionGroup: null,
//                   disabledIfCondetionGroup: null,
//                 },
//               ],
//             }
//           : field
//       ),
//     }))
//   );
// };


//   const addCondition = () => {
//   setConditionsList(prev => [
//     ...prev,
//     { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
//   ]);
// };

// const addDisableCondition = () => {
//   setDisableConditionsList(prev => [
//     ...prev,
//     { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
//   ]);
// };

//   // Ø¥Ø¶Ø§ÙØ© Ø¬Ø±ÙˆØ¨
//   const addGroup = () => {

//     // Ù†Ø¶ÙŠÙ Ø¬Ø±ÙˆØ¨ ÙØ§Ø±Øº ÙÙŠ pathGroups
//      setPathGroups((prev) => [
//     ...prev,
//     {
//       id: uuidv4(),
//       name: `Group`,
//       viewOrder: prev.length,
//       title: `Group`,
//       type: null,
//             groupFields: [
//      generateEmptyField(0)
//       ]
//     }
//   ]);


//   };

 
//   // ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø¬Ø±ÙˆØ¨
//   const handleGroupNameChange = (groupId, newName) => {
//     console.log("Changing group name:", groupId, newName);
//          setPathGroups(prev =>
//   prev.map((g) =>
//     g.id === groupId ? { ...g, name: newName } : g
//   )
// );

//   };

//   // Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ø¯
//   const addField = () => {
//   setPathGroups((prev) => {
//     if (prev.length === 0) {
//       // Ø£ÙˆÙ„ Group ÙØ§Ø¶ÙŠ â†’ Ù†Ø¶ÙŠÙÙ‡ ÙˆÙ†Ø­Ø· ÙÙŠÙ‡ Field
//       const newGroup = {
//         id: uuidv4(),
//         name: "Group 1",
//         viewOrder: 0,
//         title: "Group 1",
//         type: null,
//         groupFields: [generateEmptyField(0)]
//       };
//       return [newGroup];
//     }
//     // Ø¹Ù†Ø¯Ù†Ø§ Group Ù…ÙˆØ¬ÙˆØ¯ â†’ Ù†Ø²ÙˆØ¯ Field Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø£ÙˆÙ„ Group
//     return prev.map((g, idx) => {
//       if (idx !== 0) return g;

//       // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙŠÙ„Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø¯Ù‡
//       const newFields = [...g.groupFields, generateEmptyField(g.groupFields.length)];

//       // Ù†Ø¶Ù…Ù† ØªØ±ØªÙŠØ¨ viewOrder Ù…ØªØ³Ù„Ø³Ù„ Ù…Ù† 0..n-1
//       const reOrdered = newFields.map((f, i) => ({ ...f, viewOrder: i }));

//       return { ...g, groupFields: reOrdered };
//     });

//   });
// };

// const handleFieldLabelChange = (groupId, fieldId, newLabel,newKey) => {
//   setPathGroups((prev) =>
//     prev.map((g) =>
//       g.id === groupId
//         ? {
//             ...g,
//             groupFields: g.groupFields.map((f) =>
//               f.id === fieldId ? { ...f, name: newLabel,id:newKey?newKey:f.id } : f
//             ),
//           }
//         : g
//     )
//   );

//   // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ ActiveField
//   setActiveField((af) => {
//     // Ù„Ùˆ Ø§Ù„Ù€ activeField Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ø´ Ù‡Ùˆ Ù†ÙØ³ Ø§Ù„ÙÙŠÙ„Ø¯ØŒ Ù…Ù…ÙƒÙ† Ù†Ø³ÙŠØ¨Ù‡ Ø²ÙŠ Ù…Ø§ Ù‡Ùˆ
//     if (af && af.id !== fieldId) return af;

//     // Ù„Ùˆ Ù…ÙÙŠØ´ activeField Ø£Ùˆ Ù‡Ùˆ Ù†ÙØ³ Ø§Ù„ÙÙŠÙ„Ø¯ØŒ Ù‡Ù†Ø¹ÙŠØ¯Ù‡ ÙƒØ§Ù…Ù„
//     let updatedField = null;
//     setPathGroups((latest) => {
//       const grp = latest.find((g) => g.id === groupId);
//       if (grp) {
//         updatedField = grp.groupFields.find((f) => f.id === (newKey?newKey:fieldId));
//       }
//       return latest;
//     });

//     return updatedField || af;
//   });

// };

// const handleCheckboxChange = (propName) => (e) => {

//   const value = e.target.checked;

//   setActiveField((prev) => ({
//     ...prev,
//     [propName]: e.target.checked
//   }));

// setPathGroups((prev) =>
//     prev.map((group) => ({
//       ...group,
//       groupFields: group.groupFields.map((field) =>
//         field.id === activeField?.id
//           ? { ...field, [propName]: value }
//           : field
//       ),
//     }))
//   );
// };

//   // // Drag Start
//   const handleDragStart = (e, fieldId, fromGroupId) => {
//     const payload = JSON.stringify({ fieldId, fromGroupId });
//     e.dataTransfer.setData("text/plain", payload);
//     e.dataTransfer.effectAllowed = "move";
//   };


// const handleDrop = (e, targetGroupId) => {
//   e.preventDefault();
//   const raw = e.dataTransfer.getData("text/plain");
//   if (!raw) return;

//   let obj;
//   try {
//     obj = JSON.parse(raw);
//   } catch {
//     return;
//   }

//   const { fieldId, fromGroupId } = obj;
//   if (fromGroupId === targetGroupId) return;

//   setPathGroups((prev) => {
//     let fieldObj = null;

//     // Ø´ÙŠÙ„ Ø§Ù„ÙÙŠÙ„Ø¯ Ù…Ù† Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø§Ù„Ø£ØµÙ„ÙŠ
//     const removed = prev.map((g) => {
//       if (g.id === fromGroupId) {
//         const filtered = g.groupFields.filter((f) => {
//           if (f.id === fieldId) {
//             fieldObj = f;
//             return false;
//           }
//           return true;
//         });

//         // Ø±ØªØ¨ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
//         const reOrdered = filtered.map((f, idx) => ({
//           ...f,
//           viewOrder: idx,
//         }));

//         return { ...g, groupFields: reOrdered };
//       }
//       return g;
//     });

//     if (!fieldObj) return prev;

//     // Ø¶ÙŠÙ Ø§Ù„ÙÙŠÙ„Ø¯ ÙÙŠ Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø§Ù„Ù‡Ø¯Ù
//     return removed.map((g) => {
//       if (g.id === targetGroupId) {
//         const newFields = [...g.groupFields, { ...fieldObj }];

//         // Ø±ØªØ¨ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
//         const reOrdered = newFields.map((f, idx) => ({
//           ...f,
//           viewOrder: idx,
//         }));

//         return { ...g, groupFields: reOrdered };
//       }
//       return g;
//     });
//   });
// };


//   // // Ø­Ø°Ù Ø¬Ø±ÙˆØ¨
//   const deleteGroup = (groupId) => {
//     setPathGroups((prev) => prev.filter((g) => g.id !== groupId));
//   };

  
//   // // Ø­Ø°Ù ÙÙŠÙ„Ø¯
//   const deleteField = (groupId, fieldId) => {
// setPathGroups((prev) =>
//     prev.map((g) =>
//       g.id === groupId
//         ? {
//             ...g,
//             groupFields: g.groupFields.filter((f) => f.id !== fieldId),
//           }
//         : g
//     )
//   );
//   // Ù„Ùˆ Ø§Ù„ÙÙŠÙ„Ø¯ Ø§Ù„Ù…ØªØ­Ø¯Ø¯ activeField Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø§Ù„Ù„ÙŠ Ø§ØªÙ…Ø³Ø­ Ø±Ø¬Ø¹Ù‡ null
//   setActiveField((af) => (af && af.id === fieldId ? null : af));
//   };


// const addOption = (option, fromSystem = false) => {
//   setPathGroups((prev) =>
//     prev.map((group) => ({
//       ...group,
//       groupFields: group.groupFields.map((field) =>
//         field.id === activeField?.id
//           ? {
//               ...field,
//               fieldOption: [
//                 ...field.fieldOption,
//                 {
//                   id: fromSystem ? option.id : uuidv4(),    
//                   name: option.text || option.name || option.value,
//                   isActive: 1,
//                   relatedCategoryPathFieldId: null,
//                   relatedEntityOptionId: null,
//                   relatedEntityId: null,
//                   viewOrder:field.fieldOption.length===0?0: field.fieldOption.length-1,       // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ
//                   showIfCondetionGroup: [],
//                   selectedIfCondetionGroup: [],
//                   disabledIfCondetionGroup: [],
//                 },
//               ],
//             }
//           : field
//       ),
//     }))
//   );
// };

//   // currentGroupField Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ select Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„
//   // const currentGroupField = groupFields.find(f => f.id === activeField?.id) || groupFields[0];

//   return (
//     <div className={styles.container}>
//       {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ */}
//       <div className={styles.left}>
//         <div className={styles.groupsPanel}>
//           <div className={styles.actions}>
//             <button onClick={addGroup} className={styles.addButton}>+ New Group</button>
//             <button onClick={addField} className={styles.addButton}>+ New Field</button>
//           </div>

//           <div className={styles.groupsList}>
//             {pathGroups.map((group) => (
//               <div
//                 key={group.id}               
//                 className={styles.groupBox}
//                 onDragOver={(e) => e.preventDefault()}
//                 onDrop={(e) => handleDrop(e, group.id)}
//               >
//                 <div className={styles.groupHeader}>
//                   <input
//                     type="text"
//                     value={group.name}
//                     onChange={(e) => {handleGroupNameChange(group.id, e.target.value); autoResize(e);} }
//                     className={styles.groupNameInput}
//                   />
//                   <button className={styles.deleteBtn} onClick={() => deleteGroup(group.id)}><i className="bi bi-trash-fill fs-3"></i></button>
//                 </div>

//                 <ul className={styles.fieldsUl}>
//                   {group.groupFields.map((field) => (
//                     <li
//                       key={field.id}
//                       className={styles.fieldItem}
//                       draggable
//                       onDragStart={(e) => handleDragStart(e, field.id, group.id)}
//                        onClick={() => {
//     setOpenDropdownField(null);
//   setActiveField(field);

//   }}
//                     >
//                       <span className={styles.dragHandle} aria-hidden>â‰¡</span>
//                        <div className={styles.fieldWithDropdown}>
//                       <input
//                         type="text"
//                         value={field.name}
//                         onChange={(e) => {handleFieldLabelChange(group.id, field.id, e.target.value);  
//                           autoResize(e);
//                          setOpenDropdownField(field.id);
//                         } }
//                         className={styles.fieldInput}
//                         draggable={false}
//                       />
//                             {/* suggestions */}
//       {openDropdownField && openDropdownField === field.id && (
//         <ul className={styles.suggestions}>
//           {inputFilterList
//             .filter((item) =>
//               item.value.toLowerCase().includes(field.name.toLowerCase())
//             )
//             .map((item) => (
//               <li
//                 key={item.key}
//                 onClick={(e) =>{
//                   e.stopPropagation();
//                   handleFieldLabelChange(group.id, field.id, item.value,item.key);
//                   setActiveField((prev) =>
//     prev?.id === field.id
//       ? { ...prev, name: item.value, id: item.key }
//       : prev
//   ); 
//                   setOpenDropdownField(null);} }
//                 className={styles.suggestionItem}
//               >
//                 {item.value}
//               </li>
//             ))}
//         </ul>
//       )}
//     </div>
//                       <button
//                         className={styles.deleteBtn}
//                         onClick={(e) => {
//                           e.stopPropagation();
//                           deleteField(group.id, field.id);
//                         }}
//                       >âŒ</button>
//                     </li>
//                   ))}
//                 </ul>
//               </div>
//             ))}
//           </div>
//         </div>
//       </div>

//       {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙŠÙ…ÙŠÙ† */}
//      {activeField ? (  <div className={styles.right}>
//         <> <div className={styles.navbar}>
//           <button className={activeTab === "main" ? styles.activeBtn : ""} onClick={() => setActiveTab("main")}>
//             Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
//             </button>
//           <button className={activeTab === "fieldOptions" ? styles.activeBtn : ""} onClick={() => setActiveTab("fieldOptions")}>
//             Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ù‚Ù„
//             </button>
//           <button className={activeTab === "conditions" ? styles.activeBtn : ""} onClick={() => setActiveTab("conditions")}>Ø´Ø±ÙˆØ· Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±</button>
//              <button
//       className={activeTab === "disableConditions" ? styles.activeBtn : ""}
//       onClick={() => setActiveTab("disableConditions")}
//     >
//       Ø´Ø±ÙˆØ· Ø§Ù„ØªØ¹Ø·ÙŠÙ„
//     </button>
//         </div>

//         <div className={styles.tabContent}>
//           {activeTab === "main" && (
//             <div>
//               <p>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</p>
//               <input
//                 type="text"
//                 className={styles.input}
//                 value={activeField ? activeField.name : ""}
//               />
//               <p className='mt-2'>Ø§Ù„Ù†ÙˆØ¹</p>
//             <select className={styles.input} value={activeField?.fieldTypeId ?? ""} onChange={HandleFieldTypeSelect}>
//   <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„</option>
//   {fieldSelectList?.map((e) => (
//     <option value={e.value} key={e.value}>
//       {e.text}
//     </option>
//   ))}
// </select>

//                   <div className={`mt-3 ${styles.checkboxGroup}`}>
//       <label>
//         <input type="checkbox"     onChange={handleCheckboxChange("isRequired")}     checked={activeField?.isRequired || false} />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…Ø³Ø§Ø±ØŸ
//       </label>
//       <br />
//       <label>
//         <input type="checkbox"     checked={activeField?.isReadOnly || false}
//     onChange={handleCheckboxChange("isReadOnly")} />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·ØŸ
//       </label>
//       <br />
//            <label>
//         <input type="checkbox"    checked={activeField?.isReportExportable || false}
//     onChange={handleCheckboxChange("isReportExportable")}  />
//         Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØµØ¯ÙŠØ± ÙØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŸ
//       </label>
//     </div>

//             </div>
//           )}
//           {activeTab === "fieldOptions" && <div >{ 
//         isSelectField?
//           <div className='container'>
//             <h4>ÙÙ‚Ø· Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ù…Ù† Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
// <div className='row'>
// <div className='col-6'> <label>
//         <input   type="radio"
//       name="lookupOption"  
//       checked={useSystemLookup}
// onChange={() => {
//   setUseSystemLookup(true); 
//   setSelectedSystemLookupKey('');
//   setSystemLookupItems([]);

//   if (activeField) {
//     setPathGroups(prev =>
//       prev.map(group => ({
//         ...group,
//         groupFields: group.groupFields.map(field =>
//           field.id === activeField.id
//             ? { ...field, fieldOption: [] } // Reset
//             : field
//         ),
//       }))
//     );
//   }
// }} />
//      Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… 
//       </label></div>
// <div className='col-6'> 
//   <label>
//         <input   type="radio"
//       name="lookupOption"   
//       checked={!useSystemLookup}
//       onChange={() => {
//   setUseSystemLookup(false);
//   setSelectedSystemLookupKey('');
//   setSystemLookupItems([]);

//   if (activeField) {
//     setPathGroups(prev =>
//       prev.map(group => ({
//         ...group,
//         groupFields: group.groupFields.map(field =>
//           field.id === activeField.id
//             ? { ...field, fieldOption: [] } // Reset Ø¨Ø±Ø¯Ùˆ
//             : field
//         ),
//       }))
//     );
//   }
// }} />
//     Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµÙ‡
//            </label>
// </div>
// <br />

// {/* Ù„Ùˆ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ø¹Ø±Ø¶ select Ù…Ù…Ù„ÙˆØ¡ Ù…Ù† LookUpsFrontdata.ApplicationLookUp */}
// {useSystemLookup && (
//   <div className='col-12 mt-2'>
//     <label>Ø§Ø®ØªØ± ÙƒÙŠØ§Ù† Ù…Ù† Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</label>
//     <select className='form-control mt-2' value={selectedSystemLookupKey}  onChange={(e) => {
//     const key = e.target.value;
//     setSelectedSystemLookupKey(key);
//     // if (activeField) {
//     //   handleSelectSystemLookup(activeField.id, key,systemLookupItems);
//     // }
//   }}>
//       <option value="">-- Ø§Ø®ØªØ± --</option>
//       {LookUpsFrontdata.ApplicationLookUp.map(item => (
//         <option key={item.key} value={item.key} >{item.value}</option>
//       ))}
//     </select>

//     {/* Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ù†Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„-lookup Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© */}
//     <div className='mt-2'>
//       {systemLookupLoading ? (
//         <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ...</div>
//       ) : (
//         <div className={styles.listScroll}>
//           {systemLookupItems.length === 0 ? (
//             <div className='text-muted'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>
//           ) : (
//             systemLookupItems.map((it, idx) => (
//               <div key={idx} className='list-group-item'>
//                 <strong>{it.text}</strong>
//                   <button
//               className='btn btn-sm  ms-3'
//               onClick={() => {
//                 setSystemLookupItems(prev => prev.filter((_, i) => i !== idx));
//               }}
//             >
//               ğŸ—‘
//             </button>
//               </div>
//             ))
//           )}
//         </div>
//       )}
//     </div>
//   </div>
// )}
//  {   customOptions.length === 0 ? (
// <></>
//       ) : (<div className={`col-12 container ${styles.listScroll} mt-3`}>{
//         customOptions.map((it, idx) => (
//           <div key={idx} className={`list-item-group `}>
//             <strong>{it.text}</strong>
//             <button
//               className="btn btn-sm  ms-3"
//               onClick={() => {
//           // Ø§Ø­Ø°Ù option ÙˆØ§Ø­Ø¯ Ø¨Ø³
//           setPathGroups(prev =>
//             prev.map(group => ({
//               ...group,
//               groupFields: group.groupFields.map(field =>
//                 field.id === activeField.id
//                   ? {
//                       ...field,
//                       fieldOption: field.fieldOption.filter((_, i) => i !== idx),
//                     }
//                   : field
//               ),
//             }))
//           );
//         }}
//             >
//               ğŸ—‘
//             </button>
//           </div>
//         ))}
//          </div>
//       )}
// <input type="text" placeholder=' Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯' className={styles.input}   value={newOption}
//   onChange={(e) => setNewOption(e.target.value)} />
// <button className='btn btn-primary mt-2' 
//       onClick={() => {
//     if(newOption.trim() && activeField) {
//       handleAddCustomOption(activeField.id, newOption);
//       setNewOption("");}
//     }
//       }>Ø§Ø¶Ø§ÙÙ‡</button>
// </div>
//           </div>
          
          
          
//           :"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„"}</div>}


          
// {activeTab === "conditions" && (
//   <div>
//     <button className="btn btn-primary mb-2" onClick={addCondition}>
//       + Ø§Ø¶Ù Ø´Ø±Ø·
//     </button>

//     {conditionsList.map((cond, idx) => (
//       <div key={cond.id} className="card p-2 mb-2">
//         {/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙŠÙ„Ø¯ */}
//         <select
//           className="form-control mb-2"
//           value={cond.fieldId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
//           {pathGroups.flatMap(g => g.fields).map(f => (
//             <option key={f.id} value={f.id}>{f.label}</option>
//           ))}
//         </select>

//         {/* Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø· */}
//         <select
//           className="form-control mb-2"
//           value={cond.conditionTypeId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
//           {conditionTypes.map(ct => (
//             <option key={ct.value} value={ct.value}>{ct.text}</option>
//           ))}
//         </select>

//         {(() => {
//   const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
//   const conditionText = selectedConditionType?.text;

//   return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
//     <input
//       type="text"
//       className="form-control"
//       placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//       value={cond.value}
//       onChange={(e) => {
//         const val = e.target.value;
//         setConditionsList(prev =>
//           prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//         );
//       }}
//     />
//   );
// })()}
//       </div>
//     ))}
//   </div>
// )}

//             {activeTab === "disableConditions" && (
//   <div>
//     <button className="btn btn-primary mb-2" onClick={addDisableCondition}>
//       + Ø§Ø¶Ù Ø´Ø±Ø· ØªØ¹Ø·ÙŠÙ„
//     </button>

//     {disableConditionsList.map((cond, idx) => (
//       <div key={cond.id} className="card p-2 mb-2">
//         <select
//           className="form-control mb-2"
//           value={cond.fieldId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setDisableConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
//           {pathGroups.flatMap(g => g.fields).map(f => (
//             <option key={f.id} value={f.id}>{f.label}</option>
//           ))}
//         </select>

//         <select
//           className="form-control mb-2"
//           value={cond.conditionTypeId}
//           onChange={(e) => {
//             const val = e.target.value;
//             setDisableConditionsList(prev =>
//               prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
//             );
//           }}
//         >
//           <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
//           {conditionTypes.map(ct => (
//             <option key={ct.value} value={ct.value}>{ct.text}</option>
//           ))}
//         </select>

//         {/* {!(cond.conditionTypeId === "ÙØ§Ø±Øº" || cond.conditionTypeId === "ØºÙŠØ± ÙØ§Ø±Øº"||cond.conditionTypeId ==="Not Null"||
//           cond.conditionTypeId ==="Null" ) && (
//           <input
//             type="text"
//             className="form-control"
//             placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//             value={cond.value}
//             onChange={(e) => {
//               const val = e.target.value;
//               setDisableConditionsList(prev =>
//                 prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//               );
//             }}
//           />
//         )} */}
//         {(() => {
//   const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
//   const conditionText = selectedConditionType?.text;

//   return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
//     <input
//       type="text"
//       className="form-control"
//       placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
//       value={cond.value}
//       onChange={(e) => {
//         const val = e.target.value;
//         setDisableConditionsList(prev =>
//           prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
//         );
//       }}
//     />
//   );
// })()}

//       </div>
//     ))}
//   </div>
// )}

//         </div></>

//       </div>):null} 

//       <div onClick={()=>{console.log(pathGroups)}}>submit</div>
//     </div>
//   );
// }

// export default PathEditInfo;



























import { v4 as uuidv4 } from "uuid";
import { Api_URL } from '../../Resources/ApiUrl';
import LookUpsFrontdata from '../../Resources/LookUps'
import  { useState ,useEffect } from "react";
import styles from "./PathEditInfo.module.css";

function PathEditInfo() {
  const [openDropdownField, setOpenDropdownField] = useState(null);
  const [activeField, setActiveField] = useState(null);
  const [ActiveGroup, setActiveGroup] = useState(null);
  const [activeTab, setActiveTab] = useState("main");
  const inputFilterList = LookUpsFrontdata.FieldHelper;
  const [fieldSelectList, setfieldSelectList] = useState(null);
  const [chooseSelectField, setchooseSelectField] = useState(false);
const [useCustomLookup, setUseCustomLookup] = useState(false);
const [customOptions, setCustomOptions] = useState([]);
const [newOption, setNewOption] = useState("");

  // --- Ø¬Ø¯ÙŠØ¯: Ø­Ø§Ù„Ø§Øª Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ---
  const [useSystemLookup, setUseSystemLookup] = useState(false); // ØªÙ… ØªÙØ¹ÙŠÙ„ Ø®ÙŠØ§Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
  const [selectedSystemLookupKey, setSelectedSystemLookupKey] = useState(""); // Ø§Ù„-key Ø§Ù„Ù…Ø®ØªØ§Ø± Ù…Ù† ApplicationLookUp
  const [systemLookupItems, setSystemLookupItems] = useState([]); // Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„-API
  const [systemLookupLoading, setSystemLookupLoading] = useState(false);
const [conditionsList, setConditionsList] = useState([]); // ÙƒÙ„ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø¶Ø§ÙØ©
const [conditionTypes, setConditionTypes] = useState([]); // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ· Ù…Ù† API

  // ÙˆØ¸ÙŠÙØ© Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø³ÙŠØ·Ø© Ù„ØªÙØ§Ø¯ÙŠ Ø£Ø®Ø·Ø§Ø¡ auto-resize Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙÙ‚ÙˆØ¯Ø©

  const [disableConditionsList, setDisableConditionsList] = useState([]);

  const isSelectField = activeField?.type === "One Select" 
  || activeField?.type === "MultibelSelect" 
  || activeField?.type === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Select)" 
  || activeField?.type === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)"
  || activeField?.type === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)"
  || activeField?.type === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (CheckBox)"
  || activeField?.type === "CheckBox Group"
  || activeField?.type === "Radio Button"
  || activeField?.type === "View List"
  || activeField?.type === "Ù‚Ø§Ø¦Ù…Ø© Ù†ØµÙŠØ©"
  ;
  // Ù‡Ø°Ø§ Ø§Ù„-state ÙŠØ­ØªÙˆÙ‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù‚Ù„ (Ù†Ø³ØªØ®Ø¯Ù… Ø¹Ù†ØµØ± ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ ÙÙŠÙ„Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨)
const [pathGroups, setPathGroups] = useState([
    {
      id:  uuidv4(),
      name: "Group",
      viewOrder: 0,
      title:"Group",
      type: null,
      groupFields: [
        {
          id: uuidv4(),
          fieldTypeId: null,
          name: "field 1",
          viewOrder: 0,
          isReadOnly: false,
          isRequired: false,
          isReportExportable: false,
          isForVisitReport: false,
          isForSpecialSammaryReport: false,
          title: "field 1",
          type: null,
          unified: 0,
          isOptionRelatedToEntity: false,
          optionsRelatedToEntityId: null,
          fieldOption: [
            {
              id: null,
              name: null,
              isActive: 0,
              relatedCategoryPathFieldId: null,
              relatedEntityOptionId: null,
              relatedEntityId: null,
              viewOrder: 0,
              showIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              selectedIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              disabledIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ]
            }
          ],
          showIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          readOnlyIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          disabledIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          eventsGroup: [
            {
              id: null,
              events: [
                {
                  id: null,
                  actionTypeId: null,
                  dynamicFunctionId: null,
                  dynamicFunctionIdentifire: null,
                  parameters: [
                    {
                      id: null,
                      name: null,
                      parameterIdentifire: null,
                      parameterId: null,
                      categoryPathFieldId: null,
                      staticValue: null,
                      isRelatedToPathFields: false,
                      fieldShouldRelatedToEntityTypeId: null
                    }
                  ],
                  results: [
                    {
                      id: null,
                      name: null,
                      outputIdentifire: null,
                      resultId: null,
                      categoryPathFieldId: null,
                      isNotification: false,
                      isPathResult: false,
                      isPathValue: false
                    }
                  ],
                  processOrder: 0
                }
              ],
              executeTrigger: {
                additionalProp1: false,
                additionalProp2: false,
                additionalProp3: false
              },
              executeIfCondetionGroup: [
                {
                  id: null,
                  relatedToCategoryPathFieldId: null,
                  categoryPathFieldEventGroupId: null,
                  conditionForId: null,
                  andorOr: false,
                  viewOrder: 0,
                  conditions: [
                    {
                      id: null,
                      fieldConditionGroupId: null,
                      fieldId: null,
                      conditionForId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      conditionRelationTypeId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              andorOr: false,
              processOrder: 0
            }
          ]
        }
      ]
    }
  ])

const [fieldLookupKeys, setFieldLookupKeys] = useState({}); 
  const autoResize = (e) => {
    if (!e || !e.target) return;
    try {
      e.target.style.height = "auto";
      e.target.style.height = `${e.target.scrollHeight}px`;
    } catch (err) { /* noop */ }
  };

   useEffect(() => {
    const fetchFieldTypes = async () => {
      try {
        const entity = LookUpsFrontdata.ApplicationLookUp.find(
          (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"
        );

        if (!entity) return;

        const dto = {
          entityId: entity.key,
          condetion: null,
        };

        const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(dto),
        });

        const data = await res.json();

        if (data?.succeeded && data?.data?.items) {
          const mapped = data.data.items.map((c) => ({
            value: c.value,
            text: c.text,
          }));
          setfieldSelectList(mapped);
        }
      } catch (err) {
        console.error(err);
        if (typeof toast !== 'undefined') {
          toast.error("Ø®Ø·Ø£ ÙØ§Ù„ØªØ­Ù…ÙŠÙ„", {
            position: "top-right",
            style: { backgroundColor: "red", color: "white" },
          });
        }
      }
    };

    fetchFieldTypes();
  }, []);

  // --- Ø¬Ø¯ÙŠØ¯: Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ®ØªØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙŠØ§Ù† Ù…Ù† ApplicationLookUp Ù†Ø¬ÙŠØ¨ Ù…Ù†Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup ---
  useEffect(() => {
    if (!selectedSystemLookupKey) {
      setSystemLookupItems([]);
      return;
    }

    const fetchSystemLookupItems = async () => {
      setSystemLookupLoading(true);
      try {
        const dto = { entityId: selectedSystemLookupKey, condetion: null };
        const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dto),
        });
        const data = await res.json();
        if (data?.succeeded && data?.data?.items) {
          // Ù†Ø­ÙØ¸ Ø§Ù„Ù€ items Ø¹Ø´Ø§Ù† Ù†Ø¹Ø±Ø¶Ù‡Ù… ÙÙŠ Ø§Ù„-list (Ù†Ø£Ø®Ø° text Ùˆ value Ù…Ù† ÙƒÙ„ item)
          setSystemLookupItems(data.data.items.map(it => ({ text: it.text ?? it.value, value: it.value })));
        } else {
          setSystemLookupItems([]);
        }
      } catch (err) {
        console.error(err);
        setSystemLookupItems([]);
        if (typeof toast !== 'undefined') {
          toast.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€ Lookup");
        }
      } finally {
        setSystemLookupLoading(false);
      }
    };

    fetchSystemLookupItems();
  }, [selectedSystemLookupKey]);


  useEffect(() => {
    if (!activeField) return;

    const updatedGroup = pathGroups.find((g) =>
      g.groupFields.some((f) => f.id === activeField.id)
    );
    if (!updatedGroup) return;

    const updatedField = updatedGroup.groupFields.find(
      (f) => f.id === activeField.id
    );

    if (updatedField && updatedField.name !== activeField.name) {
      setActiveField(updatedField);
    }
  }, [pathGroups]);



  useEffect(() => {
  const fetchConditionTypes = async () => {
    try {
      const entity = LookUpsFrontdata.ApplicationLookUp.find(
        (e) => e.value === "Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø´Ø±ÙˆØ·"
      );
      if (!entity) return;

      const dto = { entityId: entity.key, condetion: null };
      const res = await fetch(`${Api_URL}/CP/v1.0/Lookup`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dto),
      });
      const data = await res.json();

      if (data?.succeeded && data?.data?.items) {
        setConditionTypes(data.data.items.map(c => ({ value: c.value, text: c.text })));
      }
    } catch (err) {
      console.error(err);
    }
  };

  fetchConditionTypes();
}, []);


// useEffect(() => {
//   if (activeField && selectedSystemLookupKey && systemLookupItems.length > 0) {
//     handleSelectSystemLookup(activeField.id, selectedSystemLookupKey, systemLookupItems);
//   }
//   else if(activeField && !selectedSystemLookupKey){
//         setPathGroups(prev =>
//         prev.map(group => ({
//           ...group,
//           groupFields: group.groupFields.map(field =>
//             field.id === activeField.id
//               ? {
//                   ...field,
//                   isOptionRelatedToEntity: false,
//                   isActive:0,
//                   optionsRelatedToEntityId: null,
//                   fieldOption: [], 
//                 }
//               : field
//           ),
//         }))
//       );
//   }
// }, [systemLookupItems, activeField, selectedSystemLookupKey]);

let generateEmptyField = (count) => 
  {
    return {
          id:  uuidv4(),
          fieldTypeId: null,
          name: "field 1",
          viewOrder: count  || 0,
          isReadOnly: false,
          isRequired: false,
          isReportExportable: false,
          isForVisitReport: false,
          isForSpecialSammaryReport: false,
          title: null,
          type: null,
          unified: 0,
          isOptionRelatedToEntity: false,
          optionsRelatedToEntityId: null,
          fieldOption: [
            {
              id: null,
              name: null,
              isActive: 0,
              relatedCategoryPathFieldId: null,
              relatedEntityOptionId: null,
              relatedEntityId: null,
              viewOrder: 0,
              showIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              selectedIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              disabledIfCondetionGroup: [
                {
                  id: null,
                  relatedCategoryPathFieldOptionId: null,
                  conditionForId: null,
                  andorOr: false,
                  conditions: [
                    {
                      id: null,
                      fieldId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      relatedCategoryPathFieldId: null,
                      relatedEntityId: null,
                      relatedEntityOptionId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ]
            }
          ],
          showIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          readOnlyIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          disabledIfCondetionGroup: [
            {
              id: null,
              relatedToCategoryPathFieldId: null,
              categoryPathFieldEventGroupId: null,
              conditionForId: null,
              andorOr: false,
              viewOrder: 0,
              conditions: [
                {
                  id: null,
                  fieldConditionGroupId: null,
                  fieldId: null,
                  conditionForId: null,
                  conditionTypeId: null,
                  value: null,
                  andorOr: false,
                  viewOrder: 0,
                  valueList: [null],
                  conditionRelationTypeId: null,
                  categoryPathFieldRelatedEntityFieldId: null
                }
              ]
            }
          ],
          eventsGroup: [
            {
              id: null,
              events: [
                {
                  id: null,
                  actionTypeId: null,
                  dynamicFunctionId: null,
                  dynamicFunctionIdentifire: null,
                  parameters: [
                    {
                      id: null,
                      name: null,
                      parameterIdentifire: null,
                      parameterId: null,
                      categoryPathFieldId: null,
                      staticValue: null,
                      isRelatedToPathFields: false,
                      fieldShouldRelatedToEntityTypeId: null
                    }
                  ],
                  results: [
                    {
                      id: null,
                      name: null,
                      outputIdentifire: null,
                      resultId: null,
                      categoryPathFieldId: null,
                      isNotification: false,
                      isPathResult: false,
                      isPathValue: false
                    }
                  ],
                  processOrder: 0
                }
              ],
              executeTrigger: {
                additionalProp1: false,
                additionalProp2: false,
                additionalProp3: false
              },
              executeIfCondetionGroup: [
                {
                  id: null,
                  relatedToCategoryPathFieldId: null,
                  categoryPathFieldEventGroupId: null,
                  conditionForId: null,
                  andorOr: false,
                  viewOrder: 0,
                  conditions: [
                    {
                      id: null,
                      fieldConditionGroupId: null,
                      fieldId: null,
                      conditionForId: null,
                      conditionTypeId: null,
                      value: null,
                      andorOr: false,
                      viewOrder: 0,
                      valueList: [null],
                      conditionRelationTypeId: null,
                      categoryPathFieldRelatedEntityFieldId: null
                    }
                  ]
                }
              ],
              andorOr: false,
              processOrder: 0
            }
          ]
        }
      
  }




  let HandleFieldTypeSelect = (e) => {
    const selectedValue = e.target.value;   // value Ù…Ù† Ø§Ù„Ù€ option
    const selectedText = e.target.options[e.target.selectedIndex].text; // Ø§Ù„Ù†Øµ Ø§Ù„Ø¸Ø§Ù‡Ø±

    if (selectedText === "One Select" || selectedText === "MultibelSelect" || selectedText === "Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Select)" || selectedText === "Ø§Ø®ØªÙŠØ§Ø± ÙˆØ§Ø­Ø¯ (Select)") {
      setchooseSelectField(true);
    } else {
       setchooseSelectField(false);
    }

    // Ù†Ø­Ø¯Ø« Ø§Ù„-pathGroups Ø¨Ù†ÙØ³ Ø§Ù„ØªØºÙŠÙŠØ±
    setPathGroups((prev) =>
      prev.map((group) => ({
        ...group,
        groupFields: group.groupFields.map((field) =>
          field.id === activeField?.id
            ? { ...field, fieldTypeId: selectedValue, type: selectedText }
            : field
        ),
      }))
    );

setActiveField((prev) => ({
  ...prev,
  fieldTypeId: selectedValue,
  type: selectedText,
}));

  }
const handleSelectSystemLookup = (fieldId, lookupKey = null, lookupItems = [], customOptions = []) => {
  setPathGroups(prev =>
    prev.map(group => ({
      ...group,
      groupFields: group.groupFields.map(field => {
        if (field.id !== fieldId) return field;

        // Ø¨Ù†Ø§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        const systemOptions = lookupItems.map((item, index) => ({
          id: uuidv4(),
          name: item.text,
          isActive: 1,
          relatedCategoryPathFieldId: null,
          relatedEntityOptionId: field,
          relatedEntityId: field.id,
          viewOrder: index,
          showIfCondetionGroup: [],
          selectedIfCondetionGroup: [],
          disabledIfCondetionGroup: [],
        }));

        // Ø¨Ù†Ø§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØµØµ
        const customOpts = customOptions.map((c, i) => ({
          id: uuidv4(),
          name: c.text,
          isActive: 1,
          relatedCategoryPathFieldId: null,
          relatedEntityOptionId: null,
          relatedEntityId: field.id,
          viewOrder: (field.fieldOption?.length || 0) + i,
          showIfCondetionGroup: [],
          selectedIfCondetionGroup: [],
          disabledIfCondetionGroup: [],
        }));

        return {
          ...field,
          isOptionRelatedToEntity: !!lookupKey,
          optionsRelatedToEntityId: lookupKey,
          fieldOption: lookupKey
            ? [...systemOptions, ...customOpts]       // Ù„Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… â†’ Ù†Ø³ØªØ¨Ø¯Ù„
            : [...(field.fieldOption || []), ...customOpts], // Ù„Ùˆ Ù…Ø®ØµØµ â†’ Ù†Ø¶ÙŠÙ
        };
      }),
    }))
  );
};


  const addCondition = () => {
  setConditionsList(prev => [
    ...prev,
    { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
  ]);
};

const addDisableCondition = () => {
  setDisableConditionsList(prev => [
    ...prev,
    { id: Date.now(), fieldId: "", conditionTypeId: "", value: "" }
  ]);
};

  // Ø¥Ø¶Ø§ÙØ© Ø¬Ø±ÙˆØ¨
  const addGroup = () => {

    // Ù†Ø¶ÙŠÙ Ø¬Ø±ÙˆØ¨ ÙØ§Ø±Øº ÙÙŠ pathGroups
     setPathGroups((prev) => [
    ...prev,
    {
      id: uuidv4(),
      name: `Group`,
      viewOrder: prev.length,
      title: `Group`,
      type: null,
            groupFields: [
     generateEmptyField(0)
      ]
    }
  ]);


  };

 
  // ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø¬Ø±ÙˆØ¨
  const handleGroupNameChange = (groupId, newName) => {
    console.log("Changing group name:", groupId, newName);
         setPathGroups(prev =>
  prev.map((g) =>
    g.id === groupId ? { ...g, name: newName } : g
  )
);

  };

  // Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ø¯
  const addField = () => {
  setPathGroups((prev) => {
    if (prev.length === 0) {
      // Ø£ÙˆÙ„ Group ÙØ§Ø¶ÙŠ â†’ Ù†Ø¶ÙŠÙÙ‡ ÙˆÙ†Ø­Ø· ÙÙŠÙ‡ Field
      const newGroup = {
        id: uuidv4(),
        name: "Group 1",
        viewOrder: 0,
        title: "Group 1",
        type: null,
        groupFields: [generateEmptyField(0)]
      };
      return [newGroup];
    }
    // Ø¹Ù†Ø¯Ù†Ø§ Group Ù…ÙˆØ¬ÙˆØ¯ â†’ Ù†Ø²ÙˆØ¯ Field Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø£ÙˆÙ„ Group
    return prev.map((g, idx) => {
      if (idx !== 0) return g;

      // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙŠÙ„Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø¯Ù‡
      const newFields = [...g.groupFields, generateEmptyField(g.groupFields.length)];

      // Ù†Ø¶Ù…Ù† ØªØ±ØªÙŠØ¨ viewOrder Ù…ØªØ³Ù„Ø³Ù„ Ù…Ù† 0..n-1
      const reOrdered = newFields.map((f, i) => ({ ...f, viewOrder: i }));

      return { ...g, groupFields: reOrdered };
    });

  });
};

const handleFieldLabelChange = (groupId, fieldId, newLabel,newKey) => {
  setPathGroups((prev) =>
    prev.map((g) =>
      g.id === groupId
        ? {
            ...g,
            groupFields: g.groupFields.map((f) =>
              f.id === fieldId ? { ...f, name: newLabel,id:newKey?newKey:f.id } : f
            ),
          }
        : g
    )
  );

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ ActiveField
  setActiveField((af) => {
    // Ù„Ùˆ Ø§Ù„Ù€ activeField Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ø´ Ù‡Ùˆ Ù†ÙØ³ Ø§Ù„ÙÙŠÙ„Ø¯ØŒ Ù…Ù…ÙƒÙ† Ù†Ø³ÙŠØ¨Ù‡ Ø²ÙŠ Ù…Ø§ Ù‡Ùˆ
    if (af && af.id !== fieldId) return af;

    // Ù„Ùˆ Ù…ÙÙŠØ´ activeField Ø£Ùˆ Ù‡Ùˆ Ù†ÙØ³ Ø§Ù„ÙÙŠÙ„Ø¯ØŒ Ù‡Ù†Ø¹ÙŠØ¯Ù‡ ÙƒØ§Ù…Ù„
    let updatedField = null;
    setPathGroups((latest) => {
      const grp = latest.find((g) => g.id === groupId);
      if (grp) {
        updatedField = grp.groupFields.find((f) => f.id === (newKey?newKey:fieldId));
      }
      return latest;
    });

    return updatedField || af;
  });

};

const handleCheckboxChange = (propName) => (e) => {

  const value = e.target.checked;

  setActiveField((prev) => ({
    ...prev,
    [propName]: e.target.checked
  }));

setPathGroups((prev) =>
    prev.map((group) => ({
      ...group,
      groupFields: group.groupFields.map((field) =>
        field.id === activeField?.id
          ? { ...field, [propName]: value }
          : field
      ),
    }))
  );
};

  // // Drag Start
  const handleDragStart = (e, fieldId, fromGroupId) => {
    const payload = JSON.stringify({ fieldId, fromGroupId });
    e.dataTransfer.setData("text/plain", payload);
    e.dataTransfer.effectAllowed = "move";
  };


const handleDrop = (e, targetGroupId) => {
  e.preventDefault();
  const raw = e.dataTransfer.getData("text/plain");
  if (!raw) return;

  let obj;
  try {
    obj = JSON.parse(raw);
  } catch {
    return;
  }

  const { fieldId, fromGroupId } = obj;
  if (fromGroupId === targetGroupId) return;

  setPathGroups((prev) => {
    let fieldObj = null;

    // Ø´ÙŠÙ„ Ø§Ù„ÙÙŠÙ„Ø¯ Ù…Ù† Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø§Ù„Ø£ØµÙ„ÙŠ
    const removed = prev.map((g) => {
      if (g.id === fromGroupId) {
        const filtered = g.groupFields.filter((f) => {
          if (f.id === fieldId) {
            fieldObj = f;
            return false;
          }
          return true;
        });

        // Ø±ØªØ¨ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
        const reOrdered = filtered.map((f, idx) => ({
          ...f,
          viewOrder: idx,
        }));

        return { ...g, groupFields: reOrdered };
      }
      return g;
    });

    if (!fieldObj) return prev;

    // Ø¶ÙŠÙ Ø§Ù„ÙÙŠÙ„Ø¯ ÙÙŠ Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø§Ù„Ù‡Ø¯Ù
    return removed.map((g) => {
      if (g.id === targetGroupId) {
        const newFields = [...g.groupFields, { ...fieldObj }];

        // Ø±ØªØ¨ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        const reOrdered = newFields.map((f, idx) => ({
          ...f,
          viewOrder: idx,
        }));

        return { ...g, groupFields: reOrdered };
      }
      return g;
    });
  });
};


  // // Ø­Ø°Ù Ø¬Ø±ÙˆØ¨
  const deleteGroup = (groupId) => {
    setPathGroups((prev) => prev.filter((g) => g.id !== groupId));
  };

  
  // // Ø­Ø°Ù ÙÙŠÙ„Ø¯
  const deleteField = (groupId, fieldId) => {
setPathGroups((prev) =>
    prev.map((g) =>
      g.id === groupId
        ? {
            ...g,
            groupFields: g.groupFields.filter((f) => f.id !== fieldId),
          }
        : g
    )
  );
  // Ù„Ùˆ Ø§Ù„ÙÙŠÙ„Ø¯ Ø§Ù„Ù…ØªØ­Ø¯Ø¯ activeField Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø§Ù„Ù„ÙŠ Ø§ØªÙ…Ø³Ø­ Ø±Ø¬Ø¹Ù‡ null
  setActiveField((af) => (af && af.id === fieldId ? null : af));
  };


const addOption = (option, fromSystem = false) => {
  setPathGroups((prev) =>
    prev.map((group) => ({
      ...group,
      groupFields: group.groupFields.map((field) =>
        field.id === activeField?.id
          ? {
              ...field,
              fieldOption: [
                ...field.fieldOption,
                {
                  id: fromSystem ? option.id : uuidv4(),    
                  name: option.text || option.name || option.value,
                  isActive: 1,
                  relatedCategoryPathFieldId: null,
                  relatedEntityOptionId: null,
                  relatedEntityId: null,
                  viewOrder:field.fieldOption.length===0?0: field.fieldOption.length-1,       // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ
                  showIfCondetionGroup: [],
                  selectedIfCondetionGroup: [],
                  disabledIfCondetionGroup: [],
                },
              ],
            }
          : field
      ),
    }))
  );
};

  // currentGroupField Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ select Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„
  // const currentGroupField = groupFields.find(f => f.id === activeField?.id) || groupFields[0];

  return (
    <div className={styles.container}>
      {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ */}
      <div className={styles.left}>
        <div className={styles.groupsPanel}>
          <div className={styles.actions}>
            <button onClick={addGroup} className={styles.addButton}>+ New Group</button>
            <button onClick={addField} className={styles.addButton}>+ New Field</button>
          </div>

          <div className={styles.groupsList}>
            {pathGroups.map((group) => (
              <div
                key={group.id}               
                className={styles.groupBox}
                onDragOver={(e) => e.preventDefault()}
                onDrop={(e) => handleDrop(e, group.id)}
              >
                <div className={styles.groupHeader}>
                  <input
                    type="text"
                    value={group.name}
                    onChange={(e) => {handleGroupNameChange(group.id, e.target.value); autoResize(e);} }
                    className={styles.groupNameInput}
                  />
                  <button className={styles.deleteBtn} onClick={() => deleteGroup(group.id)}><i className="bi bi-trash-fill fs-3"></i></button>
                </div>

                <ul className={styles.fieldsUl}>
                  {group.groupFields.map((field) => (
                    <li
                      key={field.id}
                      className={styles.fieldItem}
                      draggable
                      onDragStart={(e) => handleDragStart(e, field.id, group.id)}
                       onClick={() => {
    setOpenDropdownField(null);
  setActiveField(field);

  }}
                    >
                      <span className={styles.dragHandle} aria-hidden>â‰¡</span>
                       <div className={styles.fieldWithDropdown}>
                      <input
                        type="text"
                        value={field.name}
                        onChange={(e) => {handleFieldLabelChange(group.id, field.id, e.target.value);  
                          autoResize(e);
                         setOpenDropdownField(field.id);
                        } }
                        className={styles.fieldInput}
                        draggable={false}
                      />
                            {/* suggestions */}
      {openDropdownField && openDropdownField === field.id && (
        <ul className={styles.suggestions}>
          {inputFilterList
            .filter((item) =>
              item.value.toLowerCase().includes(field.name.toLowerCase())
            )
            .map((item) => (
              <li
                key={item.key}
                onClick={(e) =>{
                  e.stopPropagation();
                  handleFieldLabelChange(group.id, field.id, item.value,item.key);
                  setActiveField((prev) =>
    prev?.id === field.id
      ? { ...prev, name: item.value, id: item.key }
      : prev
  ); 
                  setOpenDropdownField(null);} }
                className={styles.suggestionItem}
              >
                {item.value}
              </li>
            ))}
        </ul>
      )}
    </div>
                      <button
                        className={styles.deleteBtn}
                        onClick={(e) => {
                          e.stopPropagation();
                          deleteField(group.id, field.id);
                        }}
                      >âŒ</button>
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙŠÙ…ÙŠÙ† */}
     {activeField ? (  <div className={styles.right}>
        <> <div className={styles.navbar}>
          <button className={activeTab === "main" ? styles.activeBtn : ""} onClick={() => setActiveTab("main")}>
            Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </button>
          <button className={activeTab === "fieldOptions" ? styles.activeBtn : ""} onClick={() => setActiveTab("fieldOptions")}>
            Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø­Ù‚Ù„
            </button>
          <button className={activeTab === "conditions" ? styles.activeBtn : ""} onClick={() => setActiveTab("conditions")}>Ø´Ø±ÙˆØ· Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±</button>
             <button
      className={activeTab === "disableConditions" ? styles.activeBtn : ""}
      onClick={() => setActiveTab("disableConditions")}
    >
      Ø´Ø±ÙˆØ· Ø§Ù„ØªØ¹Ø·ÙŠÙ„
    </button>
        </div>

        <div className={styles.tabContent}>
          {activeTab === "main" && (
            <div>
              <p>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</p>
              <input
                type="text"
                className={styles.input}
                value={activeField ? activeField.name : ""}
              />
              <p className='mt-2'>Ø§Ù„Ù†ÙˆØ¹</p>
<select
  className={styles.input}
  value={activeField?.fieldTypeId ?? ""}
  onChange={HandleFieldTypeSelect}
>
  <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„</option>
  {fieldSelectList?.map((item) => (
    <option key={item.value} value={item.value}>
      {item.text}
    </option>
  ))}
</select>

                  <div className={`mt-3 ${styles.checkboxGroup}`}>
      <label>
        <input type="checkbox"     onChange={handleCheckboxChange("isRequired")}     checked={activeField?.isRequired || false} />
        Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…Ø³Ø§Ø±ØŸ
      </label>
      <br />
      <label>
        <input type="checkbox"     checked={activeField?.isReadOnly || false}
    onChange={handleCheckboxChange("isReadOnly")} />
        Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·ØŸ
      </label>
      <br />
           <label>
        <input type="checkbox"    checked={activeField?.isReportExportable || false}
    onChange={handleCheckboxChange("isReportExportable")}  />
        Ù‡Ù„ Ø§Ù„Ø­Ù‚Ù„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØµØ¯ÙŠØ± ÙØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŸ
      </label>
    </div>

            </div>
          )}







{activeTab === "fieldOptions" && (
  <div>
    {isSelectField ? (
      <div className="container">
        <h4>ÙÙ‚Ø· Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ù…Ù† Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
        <div className="row">
          <div className="col-6">
            <label>
              <input
                type="radio"
                name="lookupOption"
                checked={useSystemLookup}
                onChange={() => {
                  setUseSystemLookup(true);
                  setSelectedSystemLookupKey('');
                  if (activeField) {
                    setPathGroups(prev =>
                      prev.map(group => ({
                        ...group,
                        groupFields: group.groupFields.map(field =>
                          field.id === activeField.id
                            ? { ...field, fieldOption: [] }
                            : field
                        ),
                      }))
                    );
                  }
                }}
              />
              Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
            </label>
          </div>
          <div className="col-6">
            <label>
              <input
                type="radio"
                name="lookupOption"
                checked={!useSystemLookup}
                onChange={() => {
                  setUseSystemLookup(false);
                  setSelectedSystemLookupKey('');
                  if (activeField) {
                    setPathGroups(prev =>
                      prev.map(group => ({
                        ...group,
                        groupFields: group.groupFields.map(field =>
                          field.id === activeField.id
                            ? { ...field, fieldOption: [] }
                            : field
                        ),
                      }))
                    );
                  }
                }}
              />
              Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµÙ‡
            </label>
          </div>
        </div>

        {useSystemLookup && (
       <div className="col-12 mt-2">
    <label>Ø§Ø®ØªØ± ÙƒÙŠØ§Ù† Ù…Ù† Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</label>
<select
  className="form-control mt-2"
  value={activeField?.optionsRelatedToEntityId || ""}
  onChange={(e) => {
    const key = e.target.value;

    handleSelectSystemLookup(
      activeField.id,
      key,
      systemLookupItems,
      []
    );
  }}
>
  <option value="">-- Ø§Ø®ØªØ± --</option>
  {LookUpsFrontdata.ApplicationLookUp.map(item => (
    <option key={item.key} value={item.key}>{item.value}</option>
  ))}
</select>


  </div>
        )}

        {/* Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø­Ù‚Ù„ ÙÙ‚Ø· */}
        <div className={`col-12 container ${styles.listScroll} mt-3`}>
          {activeField?.fieldOption?.length === 0 ? (
            <div className="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>
          ) : (
            activeField.fieldOption.map((opt, idx) => (
              <div key={idx} className="list-group-item">
                <strong>{opt.name}</strong>
                <button
                  className="btn btn-sm ms-3"
                  onClick={() => {
                    setPathGroups(prev =>
                      prev.map(group => ({
                        ...group,
                        groupFields: group.groupFields.map(field =>
                          field.id === activeField.id
                            ? {
                                ...field,
                                fieldOption: field.fieldOption.filter((_, i) => i !== idx),
                              }
                            : field
                        ),
                      }))
                    );
                  }}
                >
                  ğŸ—‘
                </button>
              </div>
            ))
          )}
        </div>

        {/* Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯ */}
        <input
          type="text"
          placeholder="Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯"
          className={styles.input}
          value={newOption}
          onChange={(e) => setNewOption(e.target.value)}
        />
        <button
          className="btn btn-primary mt-2"
           onClick={() => {
    <button
  className="btn btn-primary mt-2"
  onClick={() => {
    if (newOption.trim() && activeField) {
      handleSelectSystemLookup(
        activeField.id,
        useSystemLookup ? activeField.optionsRelatedToEntityId : null,
        useSystemLookup ? systemLookupItems : [],
        [{ text: newOption }]
      );
      setNewOption("");
    }
  }}
>
  Ø§Ø¶Ø§ÙÙ‡
</button>

  }}
        >
          Ø§Ø¶Ø§ÙÙ‡
        </button>
      </div>
    ) : (
      "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„"
    )}
  </div>
)}













          
{activeTab === "conditions" && (
  <div>
    <button className="btn btn-primary mb-2" onClick={addCondition}>
      + Ø§Ø¶Ù Ø´Ø±Ø·
    </button>

    {conditionsList.map((cond, idx) => (
      <div key={cond.id} className="card p-2 mb-2">
        {/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙÙŠÙ„Ø¯ */}
        <select
          className="form-control mb-2"
          value={cond.fieldId}
          onChange={(e) => {
            const val = e.target.value;
            setConditionsList(prev =>
              prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
            );
          }}
        >
          <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
          {pathGroups.flatMap(g => g.fields).map(f => (
            <option key={f.id} value={f.id}>{f.label}</option>
          ))}
        </select>

        {/* Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø· */}
        <select
          className="form-control mb-2"
          value={cond.conditionTypeId}
          onChange={(e) => {
            const val = e.target.value;
            setConditionsList(prev =>
              prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
            );
          }}
        >
          <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
          {conditionTypes.map(ct => (
            <option key={ct.value} value={ct.value}>{ct.text}</option>
          ))}
        </select>

        {(() => {
  const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
  const conditionText = selectedConditionType?.text;

  return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
    <input
      type="text"
      className="form-control"
      placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
      value={cond.value}
      onChange={(e) => {
        const val = e.target.value;
        setConditionsList(prev =>
          prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
        );
      }}
    />
  );
})()}
      </div>
    ))}
  </div>
)}

            {activeTab === "disableConditions" && (
  <div>
    <button className="btn btn-primary mb-2" onClick={addDisableCondition}>
      + Ø§Ø¶Ù Ø´Ø±Ø· ØªØ¹Ø·ÙŠÙ„
    </button>

    {disableConditionsList.map((cond, idx) => (
      <div key={cond.id} className="card p-2 mb-2">
        <select
          className="form-control mb-2"
          value={cond.fieldId}
          onChange={(e) => {
            const val = e.target.value;
            setDisableConditionsList(prev =>
              prev.map(c => c.id === cond.id ? { ...c, fieldId: val } : c)
            );
          }}
        >
          <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙÙŠÙ„Ø¯</option>
          {pathGroups.flatMap(g => g.fields).map(f => (
            <option key={f.id} value={f.id}>{f.label}</option>
          ))}
        </select>

        <select
          className="form-control mb-2"
          value={cond.conditionTypeId}
          onChange={(e) => {
            const val = e.target.value;
            setDisableConditionsList(prev =>
              prev.map(c => c.id === cond.id ? { ...c, conditionTypeId: val } : c)
            );
          }}
        >
          <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±Ø·</option>
          {conditionTypes.map(ct => (
            <option key={ct.value} value={ct.value}>{ct.text}</option>
          ))}
        </select>

        {(() => {
  const selectedConditionType = conditionTypes.find(ct => ct.value === cond.conditionTypeId);
  const conditionText = selectedConditionType?.text;

  return !(conditionText === "ÙØ§Ø±Øº" || conditionText === "ØºÙŠØ± ÙØ§Ø±Øº" || conditionText === "Not Null" || conditionText === "Null") && (
    <input
      type="text"
      className="form-control"
      placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø©"
      value={cond.value}
      onChange={(e) => {
        const val = e.target.value;
        setDisableConditionsList(prev =>
          prev.map(c => c.id === cond.id ? { ...c, value: val } : c)
        );
      }}
    />
  );
})()}

      </div>
    ))}
  </div>
)}

        </div></>

      </div>):null} 

      <div onClick={()=>{console.log(pathGroups)}}>submit</div>
    </div>
  );
}

export default PathEditInfo;






{activeTab === "fieldOptions" && (
  <div>
    {isSelectField ? (
      <div className="container">
        <h4>ÙÙ‚Ø· Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ù…Ù† Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
        <div className="row">
          <div className="col-6">
            <label>
              <input
                type="radio"
                name="lookupOption"
                checked={useSystemLookup}
                onChange={() => {
                  setUseSystemLookup(true);
                  setSelectedSystemLookupKey('');
                  if (activeField) {
                    setPathGroups(prev =>
                      prev.map(group => ({
                        ...group,
                        groupFields: group.groupFields.map(field =>
                          field.id === activeField.id
                            ? { ...field, fieldOption: [] }
                            : field
                        ),
                      }))
                    );
                  }
                }}
              />
              Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
            </label>
          </div>
          <div className="col-6">
            <label>
              <input
                type="radio"
                name="lookupOption"
                checked={!useSystemLookup}
                onChange={() => {
                  setUseSystemLookup(false);
                  setSelectedSystemLookupKey('');
                  if (activeField) {
                    setPathGroups(prev =>
                      prev.map(group => ({
                        ...group,
                        groupFields: group.groupFields.map(field =>
                          field.id === activeField.id
                            ? { ...field, fieldOption: [] }
                            : field
                        ),
                      }))
                    );
                  }
                }}
              />
              Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµÙ‡
            </label>
          </div>
        </div>

        {useSystemLookup && (
       <div className="col-12 mt-2">
    <label>Ø§Ø®ØªØ± ÙƒÙŠØ§Ù† Ù…Ù† Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</label>
<select
  className="form-control mt-2"
  value={activeField?.optionsRelatedToEntityId || ""}
  onChange={(e) => {
    const key = e.target.value;

    handleSelectSystemLookup(
      activeField.id,
      key,
      systemLookupItems,
      []
    );
  }}
>
  <option value="">-- Ø§Ø®ØªØ± --</option>
  {LookUpsFrontdata.ApplicationLookUp.map(item => (
    <option key={item.key} value={item.key}>{item.value}</option>
  ))}
</select>

  </div>
        )}

        {/* Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø­Ù‚Ù„ ÙÙ‚Ø· */}
        <div className={`col-12 container ${styles.listScroll} mt-3`}>
          {activeField?.fieldOption?.length === 0 ? (
            <div className="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>
          ) : (
            activeField.fieldOption.map((opt, idx) => (
              <div key={idx} className="list-group-item">
                <strong>{opt.name}</strong>
                <button
                  className="btn btn-sm ms-3"
                  onClick={() => {
                    setPathGroups(prev =>
                      prev.map(group => ({
                        ...group,
                        groupFields: group.groupFields.map(field =>
                          field.id === activeField.id
                            ? {
                                ...field,
                                fieldOption: field.fieldOption.filter((_, i) => i !== idx),
                              }
                            : field
                        ),
                      }))
                    );
                  }}
                >
                  ğŸ—‘
                </button>
              </div>
            ))
          )}
        </div>

        {/* Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯ */}
        <input
          type="text"
          placeholder="Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯"
          className={styles.input}
          value={newOption}
          onChange={(e) => setNewOption(e.target.value)}
        />
        <button
          className="btn btn-primary mt-2"
           onClick={() => {
    if (newOption.trim() && activeField) {
      // 1ï¸âƒ£ Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ùˆ Ù…ÙØ¹Ù„
      if (useSystemLookup && selectedSystemLookupKey) {
        handleSelectSystemLookup(
          activeField.id,
          selectedSystemLookupKey,
          systemLookupItems,
          [] // Ù‡Ù†Ø§ Ù„Ø§ Ù…Ø®ØµØµ
        );
      }

      // 2ï¸âƒ£ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø®ØµØµ Ø§Ù„Ù„ÙŠ ÙƒØªØ¨Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      if (!useSystemLookup && newOption.trim()) {
        handleSelectSystemLookup(
          activeField.id,
          null,
          [], // Ù„Ø§ Ù†Ø¸Ø§Ù…
          [{ text: newOption }] // Ø®ÙŠØ§Ø± Ù…Ø®ØµØµ ÙˆØ§Ø­Ø¯
        );
      }

      // 3ï¸âƒ£ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²ÙŠØ¬ Ù„Ùˆ Ø­Ø§Ø¨Ø¨ ØªØ¶ÙŠÙ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù…Ø®ØµØµ Ù…Ø¹ Ø¨Ø¹Ø¶
      if (useSystemLookup && newOption.trim()) {
        handleSelectSystemLookup(
          activeField.id,
          selectedSystemLookupKey,
          systemLookupItems,
          [{ text: newOption }] // Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø®ØµØµ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…
        );
      }

      // Ù…Ø³Ø­ input Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
      setNewOption("");
    }
  }}
        >
          Ø§Ø¶Ø§ÙÙ‡
        </button>
      </div>
    ) : (
      "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„"
    )}
  </div>
)}



// {activeTab === "fieldOptions" && (
//   <div>
//     {isSelectField ? (
//       <div className="container">
//         <h4>ÙÙ‚Ø· Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ù…Ù† Ø§Ù†ÙˆØ§Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</h4>

//         <div className="row">
//           <div className="col-6">
//             <label>
//               <input
//                 type="radio"
//                 name="lookupOption"
//                 checked={useSystemLookup}
//                 onChange={() => {
//                   setUseSystemLookup(true);
//                   setSelectedSystemLookupKey("");
//                   setSystemLookupItems([]);
//                   if (activeField) {
//                     setPathGroups((prev) =>
//                       prev.map((group) => ({
//                         ...group,
//                         groupFields: group.groupFields.map((field) =>
//                           field.id === activeField.id
//                             ? { ...field, fieldOption: [] }
//                             : field
//                         ),
//                       }))
//                     );
//                   }
//                 }}
//               />
//               Ø®ÙŠØ§Ø±Ø§Øª Ù…Ù† ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
//             </label>
//           </div>

//           <div className="col-6">
//             <label>
//               <input
//                 type="radio"
//                 name="lookupOption"
//                 checked={!useSystemLookup}
//                 onChange={() => {
//                   setUseSystemLookup(false);
//                   setSelectedSystemLookupKey("");
//                   setSystemLookupItems([]);
//                   if (activeField) {
//                     setPathGroups((prev) =>
//                       prev.map((group) => ({
//                         ...group,
//                         groupFields: group.groupFields.map((field) =>
//                           field.id === activeField.id
//                             ? { ...field, fieldOption: [] }
//                             : field
//                         ),
//                       }))
//                     );
//                   }
//                 }}
//               />
//               Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµÙ‡
//             </label>
//           </div>
//           <br />
//         </div>

//         {/* Select Ù„Ø§Ø®ØªÙŠØ§Ø± ÙƒÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… */}
//         {useSystemLookup && (
//           <div className="col-12 mt-2">
//             <label>Ø§Ø®ØªØ± ÙƒÙŠØ§Ù† Ù…Ù† Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</label>
//             <select
//               className="form-control mt-2"
//               value={selectedSystemLookupKey}
//               onChange={(e) => {
//                 const key = e.target.value;
//                 setSelectedSystemLookupKey(key);
//                 if (activeField) {
//                   handleSelectSystemLookup(
//                     activeField.id,
//                     key,
//                     systemLookupItems,
//                     customOptions
//                   );
//                 }
//               }}
//             >
//               <option value="">-- Ø§Ø®ØªØ± --</option>
//               {LookUpsFrontdata.ApplicationLookUp.map((item) => (
//                 <option key={item.key} value={item.key}>
//                   {item.value}
//                 </option>
//               ))}
//             </select>

//             {/* Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø£Ùˆ Ø±Ø³Ø§Ù„Ø© Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª */}
//             <div className="mt-2">
//               {systemLookupLoading ? (
//                 <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ...</div>
//               ) : (
//                 <div className={styles.listScroll}>
//                   {activeField?.fieldOption?.length > 0 ? (
//                     activeField.fieldOption.map((it, idx) => (
//                       <div key={idx} className="list-group-item">
//                         <strong>{it.name}</strong>
//                         <button
//                           className="btn btn-sm ms-3"
//                           onClick={() => {
//                             setPathGroups((prev) =>
//                               prev.map((group) => ({
//                                 ...group,
//                                 groupFields: group.groupFields.map((field) =>
//                                   field.id === activeField.id
//                                     ? {
//                                         ...field,
//                                         fieldOption: field.fieldOption.filter(
//                                           (_, i) => i !== idx
//                                         ),
//                                       }
//                                     : field
//                                 ),
//                               }))
//                             );
//                           }}
//                         >
//                           ğŸ—‘
//                         </button>
//                       </div>
//                     ))
//                   ) : systemLookupItems.length === 0 ? (
//                     <div className="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>
//                   ) : (
//                     systemLookupItems.map((it, idx) => (
//                       <div key={idx} className="list-group-item">
//                         <strong>{it.text}</strong>
//                         <button
//                           className="btn btn-sm ms-3"
//                           onClick={() => {
//                             setSystemLookupItems((prev) =>
//                               prev.filter((_, i) => i !== idx)
//                             );
//                           }}
//                         >
//                           ğŸ—‘
//                         </button>
//                       </div>
//                     ))
//                   )}
//                 </div>
//               )}
//             </div>
//           </div>
//         )}

//         {/* Ø¹Ø±Ø¶ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© */}
//         {customOptions.length > 0 && (
//           <div className={`col-12 container ${styles.listScroll} mt-3`}>
//             {customOptions.map((it, idx) => (
//               <div key={idx} className="list-item-group">
//                 <strong>{it.text}</strong>
//                 <button
//                   className="btn btn-sm ms-3"
//                   onClick={() => {
//                     setPathGroups((prev) =>
//                       prev.map((group) => ({
//                         ...group,
//                         groupFields: group.groupFields.map((field) =>
//                           field.id === activeField.id
//                             ? {
//                                 ...field,
//                                 fieldOption: field.fieldOption.filter(
//                                   (_, i) => i !== idx
//                                 ),
//                               }
//                             : field
//                         ),
//                       }))
//                     );
//                   }}
//                 >
//                   ğŸ—‘
//                 </button>
//               </div>
//             ))}
//           </div>
//         )}

//         {/* Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯ */}
//         <input
//           type="text"
//           placeholder="Ø§Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± Ø¬Ø¯ÙŠØ¯"
//           className={styles.input}
//           value={newOption}
//           onChange={(e) => setNewOption(e.target.value)}
//         />
//         <button
//           className="btn btn-primary mt-2"
//           onClick={() => {
//             if (newOption.trim() && activeField) {
//               handleSelectSystemLookup(
//                 activeField.id,
//                 useSystemLookup ? selectedSystemLookupKey : null,
//                 useSystemLookup ? systemLookupItems : [],
//                 !useSystemLookup ? customOptions : []
//               );
//               setNewOption("");
//             }
//           }}
//         >
//           Ø§Ø¶Ø§ÙÙ‡
//         </button>
//       </div>
//     ) : (
//       "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„"
//     )}
//   </div>
// )}
